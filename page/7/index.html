<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> Movle</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="https://img-blog.csdnimg.cn/20200609161448519.jpg" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="https://img-blog.csdnimg.cn/2020060916514052.png" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Movle</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['种一棵树，最好的时机是十年前，其次是现在', '人必有痴，而后有成', '今天，我没有浑浑噩噩的度过'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-读书笔记-《坚持 一种可以养成的习惯》"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/06/07/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E3%80%8A%E5%9D%9A%E6%8C%81%20%E4%B8%80%E7%A7%8D%E5%8F%AF%E4%BB%A5%E5%85%BB%E6%88%90%E7%9A%84%E4%B9%A0%E6%83%AF%E3%80%8B/"
    >读书笔记-《坚持，一种可以养成的习惯》</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/06/07/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E3%80%8A%E5%9D%9A%E6%8C%81%20%E4%B8%80%E7%A7%8D%E5%8F%AF%E4%BB%A5%E5%85%BB%E6%88%90%E7%9A%84%E4%B9%A0%E6%83%AF%E3%80%8B/" class="article-date">
  <time datetime="2020-06-07T04:57:00.000Z" itemprop="datePublished">2020-06-07</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">读书笔记</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="一-为什么你不能坚持"><a href="#一-为什么你不能坚持" class="headerlink" title="一.为什么你不能坚持"></a>一.为什么你不能坚持</h3><h4 id="1-如刷牙般轻松，这就是习惯"><a href="#1-如刷牙般轻松，这就是习惯" class="headerlink" title="1.如刷牙般轻松，这就是习惯"></a>1.如刷牙般轻松，这就是习惯</h4><p>所谓习惯就是“不依赖意志或毅力，把自己想要持续的事情引导到如每天刷牙般轻松的状态”</p>
<h4 id="2-大脑自然的习惯"><a href="#2-大脑自然的习惯" class="headerlink" title="2.大脑自然的习惯"></a>2.大脑自然的习惯</h4><p>(1)人的意识分为表意识和无意识</p>
<p>(2)习惯就是把重复的行动化为无意识的行动（自动化）。对于重复的行动，我们不使用表意识，而是将其化为无意识的自动状态，这就是所谓的习惯</p>
<h4 id="3-产生“3分钟热度”的“习惯引力”究竟是什么？"><a href="#3-产生“3分钟热度”的“习惯引力”究竟是什么？" class="headerlink" title="3.产生“3分钟热度”的“习惯引力”究竟是什么？"></a>3.产生“3分钟热度”的“习惯引力”究竟是什么？</h4><p>(1)为什么我们无法把自己想要持续的事情转化为习惯呢？</p>
<ul>
<li>因为人类具有“对抗新变化，维持现状的倾向”的特点</li>
</ul>
<p>(2)习惯引力具有两种功能：</p>
<ul>
<li>一是抵抗新变化</li>
<li>二是维持现状</li>
</ul>
<h4 id="4-持续多久之后能够“习惯化”"><a href="#4-持续多久之后能够“习惯化”" class="headerlink" title="4.持续多久之后能够“习惯化”"></a>4.持续多久之后能够“习惯化”</h4><h5 id="1-习惯分为三种"><a href="#1-习惯分为三种" class="headerlink" title="(1)习惯分为三种"></a>(1)习惯分为三种</h5><ul>
<li>一是 行为习惯</li>
<li>二是 身体习惯</li>
<li>三是 思考习惯</li>
</ul>
<h5 id="2-行为习惯"><a href="#2-行为习惯" class="headerlink" title="(2)行为习惯"></a>(2)行为习惯</h5><ul>
<li>行为习惯即每天规律的行为，</li>
<li>比如读书，记日记，整理，节约，记录家庭收支等</li>
<li>培养行为习惯的时间大约需要一个月</li>
</ul>
<h5 id="3-身体习惯"><a href="#3-身体习惯" class="headerlink" title="(3)身体习惯"></a>(3)身体习惯</h5><ul>
<li>身体习惯是与身体节奏相关的习惯，</li>
<li>例如，减肥，运动，早起，戒烟，肌力训练等</li>
<li>培养身体习惯的时间大约需要三个月</li>
</ul>
<h5 id="4-思考习惯"><a href="#4-思考习惯" class="headerlink" title="(4)思考习惯"></a>(4)思考习惯</h5><ul>
<li>思考习惯是与思考能力相关的习惯，</li>
<li>例如，逻辑性思考能力，创意能力，正面思考等习惯</li>
<li>培养思考习惯的时间大约六个月</li>
</ul>
<h4 id="5-培养行为习惯的三个阶段"><a href="#5-培养行为习惯的三个阶段" class="headerlink" title="5.培养行为习惯的三个阶段"></a>5.培养行为习惯的三个阶段</h4><h5 id="1-阶段一，反抗期（1～7天）：马上就想放弃，42-的人失败"><a href="#1-阶段一，反抗期（1～7天）：马上就想放弃，42-的人失败" class="headerlink" title="(1)阶段一，反抗期（1～7天）：马上就想放弃，42%的人失败"></a>(1)阶段一，反抗期（1～7天）：马上就想放弃，42%的人失败</h5><h5 id="2-阶段二，不稳定期（8～21天）：被预定事项或他人影响：40-的人失败"><a href="#2-阶段二，不稳定期（8～21天）：被预定事项或他人影响：40-的人失败" class="headerlink" title="(2)阶段二，不稳定期（8～21天）：被预定事项或他人影响：40%的人失败"></a>(2)阶段二，不稳定期（8～21天）：被预定事项或他人影响：40%的人失败</h5><h5 id="3-阶段三，倦怠期（22～30天）：逐渐感到厌烦，18-的人失败"><a href="#3-阶段三，倦怠期（22～30天）：逐渐感到厌烦，18-的人失败" class="headerlink" title="(3)阶段三，倦怠期（22～30天）：逐渐感到厌烦，18%的人失败"></a>(3)阶段三，倦怠期（22～30天）：逐渐感到厌烦，18%的人失败</h5><h4 id="6-以长期的眼光培养习惯"><a href="#6-以长期的眼光培养习惯" class="headerlink" title="6.以长期的眼光培养习惯"></a>6.以长期的眼光培养习惯</h4><h5 id="1-按时间分习惯："><a href="#1-按时间分习惯：" class="headerlink" title="(1)按时间分习惯："></a>(1)按时间分习惯：</h5><ul>
<li>短期习惯</li>
<li>中期习惯</li>
<li>长期习惯</li>
</ul>
<h5 id="2-短期习惯"><a href="#2-短期习惯" class="headerlink" title="(2)短期习惯"></a>(2)短期习惯</h5><ul>
<li>培养短期习惯就是培养“马上就可以看到结果的习惯”</li>
<li>例如整理，存钱，不看电视，减少开电子邮件的次数等</li>
<li>必须培养这样让行动变得高效的习惯</li>
</ul>
<h5 id="3-中期习惯"><a href="#3-中期习惯" class="headerlink" title="(3)中期习惯"></a>(3)中期习惯</h5><ul>
<li>中期习惯包括时间管理，写日记，考职业证等</li>
</ul>
<h5 id="4-长期习惯"><a href="#4-长期习惯" class="headerlink" title="(4)长期习惯"></a>(4)长期习惯</h5><ul>
<li>长期习惯包括阅读，拓展人脉，健康管理等</li>
</ul>
<h4 id="7-七十项习惯清单建立“年度计划”"><a href="#7-七十项习惯清单建立“年度计划”" class="headerlink" title="7.七十项习惯清单建立“年度计划”"></a>7.七十项习惯清单建立“年度计划”</h4><h5 id="1-自我投资"><a href="#1-自我投资" class="headerlink" title="(1)自我投资"></a>(1)自我投资</h5><p>阅读/影音学习/写日记/认识新朋友/学习专业知识/考资格证/参加研讨会、读书会/把在路上的时间转变为学习时间/利用博客、电子报发布信息/订阅刊物/重新检视人生计划/把一年的目标写在纸上</p>
<h5 id="2-金钱"><a href="#2-金钱" class="headerlink" title="(2)金钱"></a>(2)金钱</h5><p>存钱/节约/投资/填写家庭收支簿/不赌博/请他人吃饭/捐款</p>
<h5 id="3-心灵成长（压力、动力）"><a href="#3-心灵成长（压力、动力）" class="headerlink" title="(3)心灵成长（压力、动力）"></a>(3)心灵成长（压力、动力）</h5><p>每天要说积极向上的话/冥想/每天写一件感恩的事/早上泡澡/每天都有一件期待的事/每周做一件有趣的事/整理/一天做三次深呼吸/听喜欢的音乐/问有建设性的问题/一天少做一件事（工作清单或备忘录）</p>
<h5 id="4-运用时间"><a href="#4-运用时间" class="headerlink" title="(4)运用时间"></a>(4)运用时间</h5><p>不看电视/拟定第二天的计划/限定看电子邮件的次数/拒绝聚餐的邀约/杂事统一处理/先处理最重要的三件事/列工作清单/严守下班时间/提早进公司/一次只集中在一件事上/不断改善对时间的运用</p>
<h5 id="5-人际关系"><a href="#5-人际关系" class="headerlink" title="(5)人际关系"></a>(5)人际关系</h5><p>经常称呼对方的名字/每天都要称赞他人/一天有 40% 的时间保持笑容/大声地与人打招呼/成为倾听的人/原谅他人/写交换日记/每天与重要的人交谈 10 分钟以上/不说抱怨、不满的话/先说结论/以双赢的目标思考</p>
<h5 id="6-健康、美"><a href="#6-健康、美" class="headerlink" title="(6)健康、美"></a>(6)健康、美</h5><p>吃健康食品/把白米换成糙米/每天刷 3 次牙/吃天然食物/每天睡满 7 个小时/一天喝 2 升水/每天晒太阳 30 分钟/不喝酒/讲究穿着/均衡摄取营养★/饮食以蔬果为主★/戒烟★/肌力训练★/做有氧运动★/限制热量摄取★/按摩/做伸展运动</p>
<p>列表中出现★者，为需要三个月时间培养的身体习惯。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">填写“习惯的年度计划”</span><br><span class="line">第一个月_____</span><br><span class="line">第二个月_____</span><br><span class="line">第三个月_____</span><br><span class="line">第四个月_____</span><br><span class="line">第五个月_____</span><br><span class="line">第六个月_____</span><br><span class="line">第七个月_____</span><br><span class="line">第八个月_____</span><br><span class="line">第九个月_____</span><br><span class="line">第十个月_____</span><br><span class="line">第十一个月_____</span><br><span class="line">第十二个月_____</span><br></pre></td></tr></table></figure>

<h4 id="8-“培养习惯之旅”的注意事项与指引"><a href="#8-“培养习惯之旅”的注意事项与指引" class="headerlink" title="8.“培养习惯之旅”的注意事项与指引"></a>8.“培养习惯之旅”的注意事项与指引</h4><h5 id="1-前提一-每天坚持行动"><a href="#1-前提一-每天坚持行动" class="headerlink" title="(1)前提一 每天坚持行动"></a>(1)前提一 每天坚持行动</h5><h5 id="2-前提二-一定要坚持到底"><a href="#2-前提二-一定要坚持到底" class="headerlink" title="(2)前提二 一定要坚持到底"></a>(2)前提二 一定要坚持到底</h5><h3 id="二-顺利培养习惯的三个阶段"><a href="#二-顺利培养习惯的三个阶段" class="headerlink" title="二.顺利培养习惯的三个阶段"></a>二.顺利培养习惯的三个阶段</h3><h4 id="1-反抗期：在暴风雨中前行"><a href="#1-反抗期：在暴风雨中前行" class="headerlink" title="1.反抗期：在暴风雨中前行"></a>1.反抗期：在暴风雨中前行</h4><h5 id="1-预防失败的“习惯培养三原则”"><a href="#1-预防失败的“习惯培养三原则”" class="headerlink" title="(1)预防失败的“习惯培养三原则”"></a>(1)预防失败的“习惯培养三原则”</h5><ul>
<li>原则一 锁定一项习惯（不要同时培养多项习惯）</li>
<li>原则二 坚持有效的行动（行动规则越简单越好），复杂的事情容易失败，简单的事物容易坚持</li>
<li>原则三 不要太在意结果</li>
</ul>
<h5 id="2-克服反抗期的具体对策之一：从小地方开始"><a href="#2-克服反抗期的具体对策之一：从小地方开始" class="headerlink" title="(2)克服反抗期的具体对策之一：从小地方开始"></a>(2)克服反抗期的具体对策之一：从小地方开始</h5><h6 id="a-不论事情有多么复杂，把焦点放在自己能够做的事情上"><a href="#a-不论事情有多么复杂，把焦点放在自己能够做的事情上" class="headerlink" title="(a)不论事情有多么复杂，把焦点放在自己能够做的事情上"></a>(a)不论事情有多么复杂，把焦点放在自己能够做的事情上</h6><h6 id="b-会失败的人从一开始就很容易把行动的难度定的太高，于是随着热情的下降，行动就会变得麻烦而无趣"><a href="#b-会失败的人从一开始就很容易把行动的难度定的太高，于是随着热情的下降，行动就会变得麻烦而无趣" class="headerlink" title="(b)会失败的人从一开始就很容易把行动的难度定的太高，于是随着热情的下降，行动就会变得麻烦而无趣"></a>(b)会失败的人从一开始就很容易把行动的难度定的太高，于是随着热情的下降，行动就会变得麻烦而无趣</h6><h6 id="c-效果：从小地方开始会得到两种效果"><a href="#c-效果：从小地方开始会得到两种效果" class="headerlink" title="(c)效果：从小地方开始会得到两种效果"></a>(c)效果：从小地方开始会得到两种效果</h6><ul>
<li>第一种是行动压力较小，</li>
<li>第二种是引发行动的动力</li>
</ul>
<h6 id="d-方法：从小地方开始，有两种方法可行"><a href="#d-方法：从小地方开始，有两种方法可行" class="headerlink" title="(d)方法：从小地方开始，有两种方法可行"></a>(d)方法：从小地方开始，有两种方法可行</h6><ul>
<li>方法一，细分时间，比如只用5分钟整理，只花15分钟阅读，只花3分钟写日记，只跑15分钟，总的来说，就是在坚持习惯的时候，降低坚持的时间，以降低坚持习惯的难度</li>
<li>方法二，细分步骤，比如只整理一个房间，只读一页书，写一行日记，走路而不是跑步，同理，降低坚持习惯的难度</li>
</ul>
<h6 id="e-重点"><a href="#e-重点" class="headerlink" title="(e)重点"></a>(e)重点</h6><ul>
<li>重点一，设定容易执行的步骤</li>
<li>重点二，抛开不足感</li>
<li>一定要每天执行</li>
</ul>
<h5 id="3-克服反抗期的具体对策之二：简单记录"><a href="#3-克服反抗期的具体对策之二：简单记录" class="headerlink" title="(3)克服反抗期的具体对策之二：简单记录"></a>(3)克服反抗期的具体对策之二：简单记录</h5><h6 id="a-效果："><a href="#a-效果：" class="headerlink" title="(a)效果："></a>(a)效果：</h6><ul>
<li>能够客观的分析并了解问题</li>
<li>减少行动的不确定性</li>
<li>提高动力</li>
</ul>
<h6 id="b-方法："><a href="#b-方法：" class="headerlink" title="(b)方法："></a>(b)方法：</h6><ul>
<li>方法一，思考记录内容(要记录哪些项目)，比如只记录完成目标o，和未完成目标x，处理o和x之外，记录行动的内容，树枝</li>
<li>思考记录的媒介（要记录到哪里？），比如纸张，电子媒介</li>
</ul>
<h6 id="c-重点："><a href="#c-重点：" class="headerlink" title="(c)重点："></a>(c)重点：</h6><ul>
<li>不要过于繁琐</li>
<li>一定要每天记录</li>
</ul>
<h4 id="2-不稳定期：要建立“持续行动的机制”"><a href="#2-不稳定期：要建立“持续行动的机制”" class="headerlink" title="2.不稳定期：要建立“持续行动的机制”"></a>2.不稳定期：要建立“持续行动的机制”</h4><h5 id="1-在不稳定期会出现以下症状："><a href="#1-在不稳定期会出现以下症状：" class="headerlink" title="(1)在不稳定期会出现以下症状："></a>(1)在不稳定期会出现以下症状：</h5><ul>
<li>在已安排好的时间内插入其他事情而荒废计划</li>
<li>因为加班或个人私事导致计划中断</li>
<li>因为天气或突发事件导致多日无法持续行动”</li>
</ul>
<h5 id="2-若想度过不稳定期，需要建立能够持续的机制"><a href="#2-若想度过不稳定期，需要建立能够持续的机制" class="headerlink" title="(2)若想度过不稳定期，需要建立能够持续的机制"></a>(2)若想度过不稳定期，需要建立能够持续的机制</h5><h5 id="3-提高行动的难度，进入不稳定期后要把难度提高到自己本来要求的高度"><a href="#3-提高行动的难度，进入不稳定期后要把难度提高到自己本来要求的高度" class="headerlink" title="(3)提高行动的难度，进入不稳定期后要把难度提高到自己本来要求的高度"></a>(3)提高行动的难度，进入不稳定期后要把难度提高到自己本来要求的高度</h5><h5 id="4-不稳定期的三大对策"><a href="#4-不稳定期的三大对策" class="headerlink" title="(4)不稳定期的三大对策"></a>(4)不稳定期的三大对策</h5><ul>
<li>对策一 行为模式化</li>
<li>对策二 设定例外规则</li>
<li>对策三 设定持续开关</li>
</ul>
<h5 id="5-对策一：行为模式化"><a href="#5-对策一：行为模式化" class="headerlink" title="(5)对策一：行为模式化"></a>(5)对策一：行为模式化</h5><h6 id="a-就是指把自己想要培养的习惯化为固定的模式（固定的时间，固定的地点，固定的做法），并认真执行"><a href="#a-就是指把自己想要培养的习惯化为固定的模式（固定的时间，固定的地点，固定的做法），并认真执行" class="headerlink" title="(a)就是指把自己想要培养的习惯化为固定的模式（固定的时间，固定的地点，固定的做法），并认真执行"></a>(a)就是指把自己想要培养的习惯化为固定的模式（固定的时间，固定的地点，固定的做法），并认真执行</h6><h6 id="b-效果："><a href="#b-效果：" class="headerlink" title="(b)效果："></a>(b)效果：</h6><ul>
<li>效果一，培养节奏感</li>
<li>效果二，不容易忘记</li>
</ul>
<h6 id="c-方法"><a href="#c-方法" class="headerlink" title="(c)方法"></a>(c)方法</h6><ul>
<li>方法一：时间：决定星期几，几点开始</li>
<li>方法二：内容：决定数量与方法</li>
<li>方法三：地点：决定地点，例如在上班途中，办公室，家中等等</li>
</ul>
<h6 id="d-重点"><a href="#d-重点" class="headerlink" title="(d)重点"></a>(d)重点</h6><ul>
<li>重点一：尽量找不被侵犯的地方</li>
<li>重点二：考虑一举两得的做法</li>
<li>重点三：每天持续行动</li>
</ul>
<h5 id="6-对策二：设定例外规则"><a href="#6-对策二：设定例外规则" class="headerlink" title="(6)对策二：设定例外规则"></a>(6)对策二：设定例外规则</h5><h6 id="a-“例外规则”是对不规律发生的事件预先制定应对规则的弹性应对机制"><a href="#a-“例外规则”是对不规律发生的事件预先制定应对规则的弹性应对机制" class="headerlink" title="(a)“例外规则”是对不规律发生的事件预先制定应对规则的弹性应对机制"></a>(a)“例外规则”是对不规律发生的事件预先制定应对规则的弹性应对机制</h6><h6 id="b-设定例外规则并不是未来宠溺自己，而是未来让计划保持弹性"><a href="#b-设定例外规则并不是未来宠溺自己，而是未来让计划保持弹性" class="headerlink" title="(b)设定例外规则并不是未来宠溺自己，而是未来让计划保持弹性"></a>(b)设定例外规则并不是未来宠溺自己，而是未来让计划保持弹性</h6><h6 id="c-效果"><a href="#c-效果" class="headerlink" title="(c)效果"></a>(c)效果</h6><ul>
<li>效果一，有弹性的执行计划</li>
<li>效果二，减少压力</li>
</ul>
<h6 id="d-方法"><a href="#d-方法" class="headerlink" title="(d)方法"></a>(d)方法</h6><ul>
<li>方法一，考虑例外状况，A：身体状况（疲倦，提不起劲，感觉不舒服，感冒等），B：气候（太热，太冷，下雨，下雪等），C：预定事项（突然加班，聚餐等）</li>
<li>方法二，考虑应对方法，A：从小地方入手（减少习惯难度），B：替换（第二天加班完成目标，或另找一天），C：设定特别的日子</li>
</ul>
<h6 id="e-重点："><a href="#e-重点：" class="headerlink" title="(e)重点："></a>(e)重点：</h6><ul>
<li>重点一：假设可能发生的例外状况</li>
<li>重点二：一边尝试，一边变更“例外规则”</li>
</ul>
<h5 id="7-对策三：设定持续开关"><a href="#7-对策三：设定持续开关" class="headerlink" title="(7)对策三：设定持续开关"></a>(7)对策三：设定持续开关</h5><h6 id="a-“持续开关”是善于培养计划的人为了能够持续行动所设计的一些巧妙的方法"><a href="#a-“持续开关”是善于培养计划的人为了能够持续行动所设计的一些巧妙的方法" class="headerlink" title="(a)“持续开关”是善于培养计划的人为了能够持续行动所设计的一些巧妙的方法"></a>(a)“持续开关”是善于培养计划的人为了能够持续行动所设计的一些巧妙的方法</h6><h6 id="b-积极行动的动力来源分为“产生快感”和“回避痛苦”两种"><a href="#b-积极行动的动力来源分为“产生快感”和“回避痛苦”两种" class="headerlink" title="(b)积极行动的动力来源分为“产生快感”和“回避痛苦”两种"></a>(b)积极行动的动力来源分为“产生快感”和“回避痛苦”两种</h6><h6 id="c-12种持续开关分为“糖果型开关”和“处罚型开关”两大类"><a href="#c-12种持续开关分为“糖果型开关”和“处罚型开关”两大类" class="headerlink" title="(c)12种持续开关分为“糖果型开关”和“处罚型开关”两大类"></a>(c)12种持续开关分为“糖果型开关”和“处罚型开关”两大类</h6><h6 id="d-效果："><a href="#d-效果：" class="headerlink" title="(d)效果："></a>(d)效果：</h6><ul>
<li>效果一，能够获得动力</li>
<li>效果二，建立能够持续的机制</li>
</ul>
<h6 id="e-糖果型开关：利用快感，推动自己的行动"><a href="#e-糖果型开关：利用快感，推动自己的行动" class="headerlink" title="(e)糖果型开关：利用快感，推动自己的行动"></a>(e)糖果型开关：利用快感，推动自己的行动</h6><table>
<thead>
<tr>
<th>编号</th>
<th>类型</th>
<th>定义</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>奖励</td>
<td>通过奖励突破眼前的困难</td>
</tr>
<tr>
<td>2</td>
<td>被称赞</td>
<td>塑造被称赞的气氛以提升干劲</td>
</tr>
<tr>
<td>3</td>
<td>游戏</td>
<td>以游戏开启行动，提升自己的热情</td>
</tr>
<tr>
<td>4</td>
<td>理想模式</td>
<td>设定理想目标，让自己进步</td>
</tr>
<tr>
<td>5</td>
<td>仪式</td>
<td>举行小小的仪式，驱除怠惰的心情</td>
</tr>
<tr>
<td>6</td>
<td>去除障碍</td>
<td>去除阻碍行动的因素，减轻压力</td>
</tr>
</tbody></table>
<h6 id="f-处罚型开关，利用惩罚，推动自己的行动"><a href="#f-处罚型开关，利用惩罚，推动自己的行动" class="headerlink" title="(f)处罚型开关，利用惩罚，推动自己的行动"></a>(f)处罚型开关，利用惩罚，推动自己的行动</h6><table>
<thead>
<tr>
<th>编号</th>
<th>类型</th>
<th>定义</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>损益计算</td>
<td>投资时塑造失败就会亏损的环境</td>
</tr>
<tr>
<td>2</td>
<td>结交朋友</td>
<td>结交培养相同习惯的朋友，不允许自己安逸</td>
</tr>
<tr>
<td>3</td>
<td>对大众宣布</td>
<td>对大众发表宣言，塑造后无退路的状态</td>
</tr>
<tr>
<td>4</td>
<td>处罚游戏</td>
<td>利用处罚游戏击退借口</td>
</tr>
<tr>
<td>5</td>
<td>设定目标</td>
<td>设定目标，引发达成目标的欲望</td>
</tr>
<tr>
<td>6</td>
<td>强制力</td>
<td>通过与他人约定，塑造严苛的环境，时间限制等，逼迫自己进入不得不做的状况</td>
</tr>
</tbody></table>
<h6 id="g-重点："><a href="#g-重点：" class="headerlink" title="(g)重点："></a>(g)重点：</h6><ul>
<li>重点一 了解自己擅长的事</li>
<li>重点二 不同习惯有不同的“开关”，比如戒烟的开关事“对大众宣布”，慢跑的开关是“游戏”</li>
</ul>
<h4 id="3-倦怠期：“习惯引力”最后的反抗"><a href="#3-倦怠期：“习惯引力”最后的反抗" class="headerlink" title="3.倦怠期：“习惯引力”最后的反抗"></a>3.倦怠期：“习惯引力”最后的反抗</h4><h5 id="1-倦怠期会出现以下几种症状："><a href="#1-倦怠期会出现以下几种症状：" class="headerlink" title="(1)倦怠期会出现以下几种症状："></a>(1)倦怠期会出现以下几种症状：</h5><ul>
<li>感觉厌烦提不起劲</li>
<li>感受不到培养习惯的意义</li>
<li>因一成不变而产生空虚感 </li>
</ul>
<h5 id="2-倦怠期的对策有两个："><a href="#2-倦怠期的对策有两个：" class="headerlink" title="(2)倦怠期的对策有两个："></a>(2)倦怠期的对策有两个：</h5><ul>
<li>对策一：添加变化</li>
<li>对策二：计划培养下一个习惯</li>
</ul>
<h5 id="3-对策一：添加变化"><a href="#3-对策一：添加变化" class="headerlink" title="(3)对策一：添加变化"></a>(3)对策一：添加变化</h5><h6 id="a-效果：-1"><a href="#a-效果：-1" class="headerlink" title="(a)效果："></a>(a)效果：</h6><ul>
<li>效果一，以崭新的心情重新出发</li>
<li>效果二，产生动力</li>
</ul>
<h6 id="b-方法：-1"><a href="#b-方法：-1" class="headerlink" title="(b)方法："></a>(b)方法：</h6><ul>
<li>方法一，改变内容，环境，例如改变学习教材，改变学习环境等</li>
<li>方法二，使用“持续开关”</li>
</ul>
<h6 id="c-重点：-1"><a href="#c-重点：-1" class="headerlink" title="(c)重点："></a>(c)重点：</h6><ul>
<li>重点一，以“一举两得”的角度思考</li>
<li>重点二，准备多种选择</li>
<li>重点三，不要轻易改变模式或规则</li>
</ul>
<h5 id="4-对策二：计划下一项习惯"><a href="#4-对策二：计划下一项习惯" class="headerlink" title="(4)对策二：计划下一项习惯"></a>(4)对策二：计划下一项习惯</h5><h6 id="a-在倦怠期最后阶段计划下一项习惯"><a href="#a-在倦怠期最后阶段计划下一项习惯" class="headerlink" title="(a)在倦怠期最后阶段计划下一项习惯:"></a>(a)在倦怠期最后阶段计划下一项习惯:</h6><ul>
<li>就是为了建立习惯的连贯</li>
</ul>
<h6 id="b-效果"><a href="#b-效果" class="headerlink" title="(b)效果"></a>(b)效果</h6><ul>
<li>效果一，可以看到现在培养习惯的经过</li>
<li>效果二，提高培养习惯的能力</li>
</ul>
<h6 id="c-方法-1"><a href="#c-方法-1" class="headerlink" title="(c)方法"></a>(c)方法</h6><ul>
<li>方法一，把目标倒过来计算，针对优先度高的习惯，对习惯清单排序</li>
<li>方法二，拟定计划</li>
</ul>
<h6 id="d-重点："><a href="#d-重点：" class="headerlink" title="(d)重点："></a>(d)重点：</h6><ul>
<li>重点一：排列优先级</li>
<li>重点二：一定是在一个习惯倦怠后期才开始另一个习惯</li>
</ul>
<h3 id="三-十二个“持续开关”，让你远离失败"><a href="#三-十二个“持续开关”，让你远离失败" class="headerlink" title="三.十二个“持续开关”，让你远离失败"></a>三.十二个“持续开关”，让你远离失败</h3><h4 id="1-开关类型"><a href="#1-开关类型" class="headerlink" title="1.开关类型"></a>1.开关类型</h4><h5 id="1-糖果型开关：利用快感，推动自己的行动"><a href="#1-糖果型开关：利用快感，推动自己的行动" class="headerlink" title="(1)糖果型开关：利用快感，推动自己的行动"></a>(1)糖果型开关：利用快感，推动自己的行动</h5><table>
<thead>
<tr>
<th>编号</th>
<th>类型</th>
<th>定义</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>奖励</td>
<td>通过奖励突破眼前的困难</td>
</tr>
<tr>
<td>2</td>
<td>被称赞</td>
<td>塑造被称赞的气氛以提升干劲</td>
</tr>
<tr>
<td>3</td>
<td>游戏</td>
<td>以游戏开启行动，提升自己的热情</td>
</tr>
<tr>
<td>4</td>
<td>理想模式</td>
<td>设定理想目标，让自己进步</td>
</tr>
<tr>
<td>5</td>
<td>仪式</td>
<td>举行小小的仪式，驱除怠惰的心情</td>
</tr>
<tr>
<td>6</td>
<td>去除障碍</td>
<td>去除阻碍行动的因素，减轻压力</td>
</tr>
</tbody></table>
<h5 id="2-处罚型开关，利用惩罚，推动自己的行动"><a href="#2-处罚型开关，利用惩罚，推动自己的行动" class="headerlink" title="(2)处罚型开关，利用惩罚，推动自己的行动"></a>(2)处罚型开关，利用惩罚，推动自己的行动</h5><table>
<thead>
<tr>
<th>编号</th>
<th>类型</th>
<th>定义</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>损益计算</td>
<td>投资时塑造失败就会亏损的环境</td>
</tr>
<tr>
<td>2</td>
<td>结交朋友</td>
<td>结交培养相同习惯的朋友，不允许自己安逸</td>
</tr>
<tr>
<td>3</td>
<td>对大众宣布</td>
<td>对大众发表宣言，塑造后无退路的状态</td>
</tr>
<tr>
<td>4</td>
<td>处罚游戏</td>
<td>利用处罚游戏击退借口</td>
</tr>
<tr>
<td>5</td>
<td>设定目标</td>
<td>设定目标，引发达成目标的欲望</td>
</tr>
<tr>
<td>6</td>
<td>强制力</td>
<td>通过与他人约定，塑造严苛的环境，时间限制等，逼迫自己进入不得不做的状况</td>
</tr>
</tbody></table>
<h4 id="2-糖果型开关一：奖励"><a href="#2-糖果型开关一：奖励" class="headerlink" title="2.糖果型开关一：奖励"></a>2.糖果型开关一：奖励</h4><h5 id="1-重点："><a href="#1-重点：" class="headerlink" title="(1)重点："></a>(1)重点：</h5><ul>
<li>重点一，思考奖励与习惯的相关型，相关性越强，促进行动的力量越大</li>
<li>重点二，设定喜欢的事物，设定培养某个习惯后，就可以得到喜欢的事物</li>
</ul>
<h4 id="3-糖果型开关二：被称赞"><a href="#3-糖果型开关二：被称赞" class="headerlink" title="3.糖果型开关二：被称赞"></a>3.糖果型开关二：被称赞</h4><h5 id="1-重点：-1"><a href="#1-重点：-1" class="headerlink" title="(1)重点："></a>(1)重点：</h5><ul>
<li>重点一，选择称赞自己的对象，对不同的习惯，选择不同的适合的对象</li>
<li>重点二，告知对方要求，请对方定期称赞自己，告诉对方这样会给自己带来干劲；自己主动要求对方反馈（“我已经瘦了3斤了，你觉得我又没有改变”）</li>
</ul>
<h4 id="4-糖果型开关三：游戏"><a href="#4-糖果型开关三：游戏" class="headerlink" title="4.糖果型开关三：游戏"></a>4.糖果型开关三：游戏</h4><p>(1)重点：</p>
<ul>
<li>重点一，想一些有趣的创意</li>
<li>尝试后留下有用的创意</li>
</ul>
<h4 id="5-糖果型开关四：理想模式"><a href="#5-糖果型开关四：理想模式" class="headerlink" title="5.糖果型开关四：理想模式"></a>5.糖果型开关四：理想模式</h4><p>(1)重点：</p>
<ul>
<li>重点一，找到理想的人物，东西</li>
<li>重点二，视觉化，贴他们的海报，壁纸等，让自己看得见</li>
</ul>
<h4 id="6-糖果型开关五：仪式"><a href="#6-糖果型开关五：仪式" class="headerlink" title="6.糖果型开关五：仪式"></a>6.糖果型开关五：仪式</h4><p>(1)重点：</p>
<ul>
<li>重点一，设定小小的仪式，把仪式视为一个小行动，先踏出这一步</li>
<li>重点二，思考仪式与习惯的关联性，举行仪式的目的在于调整心态及热身，选择与习惯相关的行动最后</li>
<li>重点三，设定仪式使其成为习惯</li>
</ul>
<h4 id="7-糖果型开关：去除障碍"><a href="#7-糖果型开关：去除障碍" class="headerlink" title="7.糖果型开关：去除障碍"></a>7.糖果型开关：去除障碍</h4><p>(1)重点：</p>
<ul>
<li>重点一，列出障碍，妨行动的因素（人，活动等）</li>
<li>重点二，思考解决对策</li>
<li>重点三，提出自己的主张，如果其他人是阻碍因素的话，要清楚拒绝或向对方提出要求，让对方了解情况，请对方尊重自己的选择</li>
</ul>
<h4 id="8-处罚型开关：损益计算"><a href="#8-处罚型开关：损益计算" class="headerlink" title="8.处罚型开关：损益计算"></a>8.处罚型开关：损益计算</h4><p>(1)重点：</p>
<ul>
<li>重点一，下决心投资，至少我们会因为想要回收资本而坚持下去</li>
<li>谨慎选择投资对象</li>
<li>分期付款也有效</li>
</ul>
<h4 id="9-处罚型开关：结交朋友"><a href="#9-处罚型开关：结交朋友" class="headerlink" title="9.处罚型开关：结交朋友"></a>9.处罚型开关：结交朋友</h4><p>(1)重点：</p>
<ul>
<li>重点一，谨慎选择伙伴，不要选择“马上会放弃”，“不遵守约定”的伙伴</li>
<li>重点二，寻找支持者，选择身边因自己的习惯而受益的人，并请求得到对方的支持，这样会破除自己贪图安逸的心态</li>
<li>重点三，通过教室或社团建立朋友群，找到志同道合的朋友</li>
</ul>
<h4 id="10-处罚型开关：对大众宣布"><a href="#10-处罚型开关：对大众宣布" class="headerlink" title="10.处罚型开关：对大众宣布"></a>10.处罚型开关：对大众宣布</h4><p>(1)重点</p>
<ul>
<li>重点一，对大众或特定的人“发表宣言”</li>
<li>重点二，意识到“监视点”</li>
<li>重点三，与其他的“开关”并用</li>
</ul>
<h4 id="11-处罚型开关：处罚游戏"><a href="#11-处罚型开关：处罚游戏" class="headerlink" title="11.处罚型开关：处罚游戏"></a>11.处罚型开关：处罚游戏</h4><p>(1)重点：</p>
<ul>
<li>重点一，下决心处罚自己，一定要重重的的处罚</li>
<li>重点二，与自己约定或与其他人约定</li>
<li>重点三，留下契约书</li>
</ul>
<h4 id="12-处罚型开关：设定目标"><a href="#12-处罚型开关：设定目标" class="headerlink" title="12.处罚型开关：设定目标"></a>12.处罚型开关：设定目标</h4><p>(1)重点：</p>
<ul>
<li>重点一，设定大目标，长期目标，以5年，10年为期限</li>
<li>重点二，设定小目标，以半年，三个月，一个月，十天为期限，设定小目标</li>
<li>与其他“开关”并用</li>
</ul>
<h4 id="13-处罚型开关：强制力"><a href="#13-处罚型开关：强制力" class="headerlink" title="13.处罚型开关：强制力"></a>13.处罚型开关：强制力</h4><p>(1)重点：</p>
<ul>
<li>重点一，雇佣专家</li>
<li>塑造有限的环境</li>
</ul>
<h3 id="四-习惯清单模版"><a href="#四-习惯清单模版" class="headerlink" title="四.习惯清单模版"></a>四.习惯清单模版</h3><h5 id="1-五分钟整理"><a href="#1-五分钟整理" class="headerlink" title="1.五分钟整理"></a>1.五分钟整理</h5><p>A 先生的习惯清单</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">内容与目标</span><br><span class="line">习惯内容：每天早上从七点开始，花 15 分钟整理。</span><br><span class="line">目标：三个月后，在整齐清洁的家与办公室中过舒适的生活。</span><br><span class="line">三年后：提高工作效率，提升工作成果，产生自信。</span><br><span class="line">反抗期的对策</span><br><span class="line">①以婴儿学步开始：</span><br><span class="line">每天花 5 分钟整理。</span><br><span class="line">＊虽然没有确定固定时段，不过选择早上整理比较好。</span><br><span class="line">②简单记录</span><br><span class="line">在 30 天的确认清单上填“○”。</span><br><span class="line">＊将确认清单贴在冰箱上。</span><br><span class="line">不稳定期的对策</span><br><span class="line">①模式化</span><br><span class="line">在早上七点到七点十五分之间执行。</span><br><span class="line">②设定例外规则</span><br><span class="line">疲倦或加班时：早上只花 5 分钟时间整理，或晚上花 15 分钟整理。</span><br><span class="line">③设定持续开关</span><br><span class="line">用计时器、换上专门的服装（仪式）。</span><br><span class="line">打开电视之前整理（去除障碍）。</span><br><span class="line">结束后喝一杯咖啡（奖励）。</span><br><span class="line">播放喜欢听的音乐（游戏）。</span><br><span class="line">倦怠期的对策</span><br><span class="line">①添加变化</span><br><span class="line">一周挑一天作为整理日。</span><br><span class="line">邀请朋友来家里玩（强制力）。</span><br><span class="line">与女朋友一边比赛一边整理（朋友加游戏）。</span><br><span class="line">②计划下一项习惯</span><br><span class="line">睡前冥想 15 分钟（消除压力、追寻自我）。</span><br></pre></td></tr></table></figure>

<h5 id="2-学英语–利用“例外规则”减少行动的变动性"><a href="#2-学英语–利用“例外规则”减少行动的变动性" class="headerlink" title="2.学英语–利用“例外规则”减少行动的变动性"></a>2.学英语–利用“例外规则”减少行动的变动性</h5><p>B 先生的习惯清单</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">内容与目标</span><br><span class="line">内容：每天晚上十一点开始，花 30 分钟进行英文阅读练习。</span><br><span class="line">目标：三个月后，自己可以读英文书。</span><br><span class="line">三年后：取得美国 CPA 资格，成功升职为组长。</span><br><span class="line">反抗期的对策</span><br><span class="line">①以“婴儿学步”开始</span><br><span class="line">每天一定要翻开英文教科书，至少读一页内容。</span><br><span class="line">＊就算只读一分钟也好。</span><br><span class="line">②简单记录</span><br><span class="line">在教科书上贴一张 30 天的记录表。</span><br><span class="line">不稳定期的对策</span><br><span class="line">①行为模式化</span><br><span class="line">回家后花 30 分钟学习。</span><br><span class="line">＊晚上十一点到十一点半最为理想。</span><br><span class="line">②设定例外规则</span><br><span class="line">若晚上十一点以后才回家：中午用餐时至少要学习 10 分钟（如果事先知</span><br><span class="line">道）/最少要读一页的教科书（如果事先不知道）。</span><br><span class="line">③设定持续开关</span><br><span class="line">不开电视（去除障碍）。</span><br><span class="line">在教材上投资十万日元（损益计算）。</span><br><span class="line">对主管提出宣言“一年后 TOEIC 要考八百分“（对大众宣布）。</span><br><span class="line">倦怠期的对策</span><br><span class="line">①添加变化</span><br><span class="line">每周两天阅读莎士比亚原文（奖励）。</span><br><span class="line">安排英文老师的私人指导课程（强制力）。</span><br><span class="line">②计划下一项习惯</span><br><span class="line">培养听英文的习惯（每天 30 分钟）。</span><br></pre></td></tr></table></figure>

<h5 id="3-节约–“习惯化原则”引领你走向成功"><a href="#3-节约–“习惯化原则”引领你走向成功" class="headerlink" title="3.节约–“习惯化原则”引领你走向成功"></a>3.节约–“习惯化原则”引领你走向成功</h5><p>C 小姐的习惯清单</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">内容与目标</span><br><span class="line">内容：以一天 2000 日元的花费过日子。</span><br><span class="line">目标：三个月后，能够存下 20% 的薪水。</span><br><span class="line">三年后：在夏威夷举办婚礼。</span><br><span class="line">反抗期的对策</span><br><span class="line">①以“婴儿学步”开始</span><br><span class="line">一周的零食花销控制在 500 日元以下。</span><br><span class="line">②简单记录</span><br><span class="line">使用记事本记录花销。</span><br><span class="line">＊记录早上出门前钱包里的钱减去回家时钱包里的余额。</span><br><span class="line">不稳定期的对策</span><br><span class="line">①模式化</span><br><span class="line">餐费 1300 日元、零食 300 日元、饮料 400 日元为标准。</span><br><span class="line">②设定例外规则</span><br><span class="line">聚餐：列为其他预算项目。</span><br><span class="line">花费超支：在一星期的预算范围中调整。</span><br><span class="line">③设定持续开关</span><br><span class="line">钱包里只放 2000 日元（强制力）。</span><br><span class="line">放纵日：一周吃一顿 2000 日元的午餐（奖励）。</span><br><span class="line">计算一年后、三个月后、一个月后的节约效果（设定目标）。</span><br><span class="line">倦怠期的对策</span><br><span class="line">①添加变化</span><br><span class="line">成功做到的那天存 500 日元在存钱罐里（游戏）。</span><br><span class="line">如果当周花费超出预算，第二周就不能吃零食（处罚游戏）。</span><br><span class="line">②计划下一项习惯</span><br><span class="line">挑战减肥的习惯。</span><br></pre></td></tr></table></figure>
<h5 id="4-减肥–三个月后苗条不反弹"><a href="#4-减肥–三个月后苗条不反弹" class="headerlink" title="4.减肥–三个月后苗条不反弹"></a>4.减肥–三个月后苗条不反弹</h5><p>D 先生的习惯清单</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">内容与目标</span><br><span class="line">习惯内容：培养一天摄取 2000 卡路里的饮食习惯。</span><br><span class="line">目标：六个月后，体重减轻 10 公斤，健康检查的所有异常数值都回归正常。</span><br><span class="line">三年后：保持 62 公斤的理想体重，通过运动达到身体脂肪含量为 16% 的</span><br><span class="line">健康状态。</span><br><span class="line">反抗期的对策</span><br><span class="line">①以“婴儿学步”开始</span><br><span class="line">每天晚餐的热量控制在 500 卡路里以下。</span><br><span class="line">＊早餐、中餐不限制。</span><br><span class="line">②简单记录</span><br><span class="line">记录早餐、午餐、晚餐摄取的热量。</span><br><span class="line">＊购买食物热量表，记录大概的目标。</span><br><span class="line">每天记录体重。</span><br><span class="line">＊体重计前方贴上记录用的纸张。</span><br><span class="line">不稳定期的对策</span><br><span class="line">①逐渐提高门槛</span><br><span class="line">第 4、第 5 周：2600 卡路里热量。</span><br><span class="line">第 6、第 7 周：每天摄取 2300 卡路里热量。</span><br><span class="line">②模式化</span><br><span class="line">早上七点、中午十二点、晚上七点用餐。</span><br><span class="line">③设定例外规则</span><br><span class="line">聚餐：解禁。</span><br><span class="line">假日：可多摄取 200 卡路里。</span><br><span class="line">④设定持续开关</span><br><span class="line">6 个月体重减少 10 公斤（设定目标）。</span><br><span class="line">贴上具有高人气的艺人相片（理想目标）。</span><br><span class="line">没达到目标那天就要跑步 30 分钟（处罚游戏）。</span><br><span class="line">聚餐只喝乌龙茶（去除障碍）。</span><br><span class="line">稳定期的对策</span><br><span class="line">①遵守自己设定的门槛</span><br><span class="line">“继续维持每天摄取 2000 卡路里热量。</span><br><span class="line">②享受小成长</span><br><span class="line">把体重的变化做成图表。</span><br><span class="line">问旁人自己外表的变化（被称赞）。</span><br><span class="line">倦怠期的对策</span><br><span class="line">①添加变化</span><br><span class="line">制作食谱并自己下厨做饭（游戏）。</span><br><span class="line">购买减肥后才穿得下的西装（损益计算）。</span><br><span class="line">②计划下一项习惯</span><br><span class="line">培养跑步的习惯。</span><br></pre></td></tr></table></figure>

<h5 id="5-早起–把成长“视觉化”"><a href="#5-早起–把成长“视觉化”" class="headerlink" title="5.早起–把成长“视觉化”"></a>5.早起–把成长“视觉化”</h5><p>E 先生的习惯清单</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">内容与目标</span><br><span class="line">习惯内容：每天早上七点半上班。</span><br><span class="line">目标：六个月后，工作效率提高 30%，每天晚上七点下班，在家吃晚饭，</span><br><span class="line">让家庭气氛和谐美好。</span><br><span class="line">三年后：早上五点起床、跑步，然后与太太、小孩悠闲地享用早餐。</span><br><span class="line">反抗期的对策</span><br><span class="line">①以“婴儿学步”开始</span><br><span class="line">每天七点起床。</span><br><span class="line">＊晚上 12 点睡觉。</span><br><span class="line">②简单记录</span><br><span class="line">每天在家里的日历上填上“○”和“X”。</span><br><span class="line">填写上班时间和下班时间。</span><br><span class="line">不稳定期的对策</span><br><span class="line">①逐渐提高门槛</span><br><span class="line">第 4、第 5 周：八点上班（六点半起床）。</span><br><span class="line">第 6、第 7 周：七点半上班（六点起床）。</span><br><span class="line">②模式化</span><br><span class="line">早上六点起床、晚上十一点半睡觉（晚上八点前下班）。</span><br><span class="line">③设定例外规则</span><br><span class="line">深夜回家、聚餐时：跟往常一样九点上班。</span><br><span class="line">④设定持续开关</span><br><span class="line">对部下宣布上班时间（对大众宣布）。</span><br><span class="line">每周进行一次早晨会议（强制力）。</span><br><span class="line">请太太配合睡觉、起床的时间（结交朋友）。</span><br><span class="line">如果没做到就付给太太 1000 日元（处罚游戏）。</span><br><span class="line">稳定期的对策</span><br><span class="line">①遵守自己设定的门槛</span><br><span class="line">每天早上一定要七点半上班（六点起床）。</span><br><span class="line">②享受小成长</span><br><span class="line">确实感受到工作效率的提升。</span><br><span class="line">把工作时间的变化视觉化。</span><br><span class="line">倦怠期的对策</span><br><span class="line">①添加变化</span><br><span class="line">让部下也在七点半上班（习惯的朋友）。</span><br><span class="line">每周与妻子吃一次自助早餐（奖励）。</span><br><span class="line">②计划下一项习惯</span><br><span class="line">培养倾听的习惯。</span><br></pre></td></tr></table></figure>

<h5 id="6-戒烟–利用“去除障碍”的方式赶走香烟的诱惑"><a href="#6-戒烟–利用“去除障碍”的方式赶走香烟的诱惑" class="headerlink" title="6.戒烟–利用“去除障碍”的方式赶走香烟的诱惑"></a>6.戒烟–利用“去除障碍”的方式赶走香烟的诱惑</h5><p>F 先生的习惯清单</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">内容与目标</span><br><span class="line">习惯内容：完全戒烟。</span><br><span class="line">目标：六个月后：身体变得轻盈，健康检查的结果没有让人担忧的指标。</span><br><span class="line">省去抽烟的时间，工作效率提高，减少加班。</span><br><span class="line">三年后：戒烟省下 88 万日元，一家三口一起去夏威夷旅行。</span><br><span class="line">反抗期的对策</span><br><span class="line">①以“婴儿学步”开始</span><br><span class="line">从一天抽 40 根烟减少为一天抽 30 根烟。</span><br><span class="line">②简单记录</span><br><span class="line">每天在记事本上记录早、晚抽烟的数量。</span><br><span class="line">不稳定期的对策</span><br><span class="line">①逐渐提高门槛</span><br><span class="line">第 4、第 5 周：从每天抽 30 根烟减少为每天抽 15 根烟。</span><br><span class="line">第 6、第 7 周：从每天抽 15 根烟减少为每天最多抽 5 根烟。</span><br><span class="line">②模式化</span><br><span class="line">抽烟时间：上午九点到下午六点，不在家里抽烟。</span><br><span class="line">③设定例外规则</span><br><span class="line">如果抽多了的话：第二天的烟量减少。</span><br><span class="line">④设定持续开关</span><br><span class="line">可以吃自己爱吃的东西（奖励）。</span><br><span class="line">对同事/家人发表戒烟宣言（对大众宣布）。</span><br><span class="line">请太太称赞自己（被称赞）。</span><br><span class="line">尽量避免聚会、张贴自己肺部的相片（去除障碍）。</span><br><span class="line">稳定期的对策</span><br><span class="line">①遵守自己制定的门槛</span><br><span class="line">完全断绝香烟。</span><br><span class="line">毫无例外，一根也不行。</span><br><span class="line">②享受小成长</span><br><span class="line">感受身体发生的变化。</span><br><span class="line">倦怠期的对策</span><br><span class="line">①添加变化</span><br><span class="line">用省下来的香烟钱买喜欢的鱼竿（奖励）。</span><br><span class="line">把每天省下的 800 日元存入储蓄罐（游戏）。</span><br><span class="line">找同事一起戒烟（结交朋友）。</span><br><span class="line">②计划下一项习惯</span><br><span class="line">减肥。</span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">读书笔记</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-读书笔记-《关键20小时，快速学会任何技能》"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/05/10/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E3%80%8A%E5%85%B3%E9%94%AE20%E5%B0%8F%E6%97%B6%EF%BC%8C%E5%BF%AB%E9%80%9F%E5%AD%A6%E4%BC%9A%E4%BB%BB%E4%BD%95%E6%8A%80%E8%83%BD%E3%80%8B/"
    >读书笔记-《关键20小时 快速学会任何技能》</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/05/10/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E3%80%8A%E5%85%B3%E9%94%AE20%E5%B0%8F%E6%97%B6%EF%BC%8C%E5%BF%AB%E9%80%9F%E5%AD%A6%E4%BC%9A%E4%BB%BB%E4%BD%95%E6%8A%80%E8%83%BD%E3%80%8B/" class="article-date">
  <time datetime="2020-05-10T04:57:00.000Z" itemprop="datePublished">2020-05-10</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">读书笔记</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="一-作者自序"><a href="#一-作者自序" class="headerlink" title="一.作者自序"></a>一.作者自序</h3><h4 id="1-要“学会”而非“学精”"><a href="#1-要“学会”而非“学精”" class="headerlink" title="1.要“学会”而非“学精”"></a>1.要“学会”而非“学精”</h4><h4 id="2-要“质量”而非“数量”"><a href="#2-要“质量”而非“数量”" class="headerlink" title="2.要“质量”而非“数量”"></a>2.要“质量”而非“数量”</h4><ul>
<li>充分练习是快速学习技能的关键</li>
</ul>
<h4 id="3-什么是“快速技能习得”"><a href="#3-什么是“快速技能习得”" class="headerlink" title="3.什么是“快速技能习得”"></a>3.什么是“快速技能习得”</h4><p><strong>快速技能习得分为4个步骤</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(1)分解步骤：把技能最最大程度的细分，分成若干小步骤</span><br><span class="line"></span><br><span class="line">(2)充分学习：对每个小步骤进行充分的学习，以便进行灵活的练习，并在练习中自我修正</span><br><span class="line"></span><br><span class="line">(3)克服困难：克服在练习过程中出现的生理，心理或情绪上的障碍</span><br><span class="line"></span><br><span class="line">(4)集中练习：至少用20小时集中学习最重要的小步骤</span><br></pre></td></tr></table></figure>
<h4 id="4-技能习得与技能学习"><a href="#4-技能习得与技能学习" class="headerlink" title="4.技能习得与技能学习"></a>4.技能习得与技能学习</h4><h4 id="5-技能学习的真正意义"><a href="#5-技能学习的真正意义" class="headerlink" title="5.技能学习的真正意义"></a>5.技能学习的真正意义</h4><ul>
<li>技能学习很重要，关于技能的理论知识是极其重要的，只有学好了理论，才能在实践中自我修改和自我完善</li>
</ul>
<h4 id="6-技能习得与技能训练"><a href="#6-技能习得与技能训练" class="headerlink" title="6.技能习得与技能训练"></a>6.技能习得与技能训练</h4><ul>
<li>技能习得和技能训练也有很大不同，技能训练是在技能习得之后，重复练习以达到提高技能的目的</li>
<li>真正的技能习得需要达到一定的训练量，否则就没有效果</li>
</ul>
<h4 id="7-技能习得和教育，资格认证"><a href="#7-技能习得和教育，资格认证" class="headerlink" title="7.技能习得和教育，资格认证"></a>7.技能习得和教育，资格认证</h4><ul>
<li>技能习得需要长时期持续，专注的练习，同时也需要自己创造性的，灵活的，自由的梳理属于自己的目标</li>
<li>“创造，灵活，自由”是快速习得技能的关键因素</li>
</ul>
<h4 id="8-神经生理学：大脑的可塑性和肌肉的记忆"><a href="#8-神经生理学：大脑的可塑性和肌肉的记忆" class="headerlink" title="8.神经生理学：大脑的可塑性和肌肉的记忆"></a>8.神经生理学：大脑的可塑性和肌肉的记忆</h4><h5 id="1-僵固式思维模式：人物天赋就是能力本身"><a href="#1-僵固式思维模式：人物天赋就是能力本身" class="headerlink" title="(1)僵固式思维模式：人物天赋就是能力本身"></a>(1)僵固式思维模式：人物天赋就是能力本身</h5><h5 id="2-成长式思维模式：真正哺育天赋的是反复的练习和长期的坚持"><a href="#2-成长式思维模式：真正哺育天赋的是反复的练习和长期的坚持" class="headerlink" title="(2)成长式思维模式：真正哺育天赋的是反复的练习和长期的坚持"></a>(2)成长式思维模式：真正哺育天赋的是反复的练习和长期的坚持</h5><ul>
<li>只要肯练习，人的大脑是具备提高技能的功能的。</li>
</ul>
<h4 id="9-技能习得分为三大步骤"><a href="#9-技能习得分为三大步骤" class="headerlink" title="9.技能习得分为三大步骤"></a>9.技能习得分为三大步骤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(1)早起认知。了解自己即将学习的技能是什么，探索研究，想想整个过程，把技能细分为几个可控的小步骤</span><br><span class="line"></span><br><span class="line">(2)中期联想：训练，注意环境反馈，根据反馈调整方法</span><br><span class="line"></span><br><span class="line">(3)后期自主训练</span><br></pre></td></tr></table></figure>
<h3 id="二-快速习得技能的10个方法"><a href="#二-快速习得技能的10个方法" class="headerlink" title="二.快速习得技能的10个方法"></a>二.快速习得技能的10个方法</h3><h4 id="1-选择方向"><a href="#1-选择方向" class="headerlink" title="1.选择方向"></a>1.选择方向</h4><ul>
<li>优先选择自己感兴趣的方向，项目</li>
</ul>
<h4 id="2-集中精力"><a href="#2-集中精力" class="headerlink" title="2.集中精力"></a>2.集中精力</h4><ul>
<li>把精力放在一门技能的学习上</li>
</ul>
<h4 id="3-制定目标"><a href="#3-制定目标" class="headerlink" title="3.制定目标"></a>3.制定目标</h4><ul>
<li>制定学习目标让我们有机会去想象我们学成以后会是什么样子</li>
<li>一旦未来努力的方向确定下来，就更容易达到目标</li>
<li>把目标定的越轻松，掌握相关技能的速度就越快</li>
<li>降低标准，快速习得技能的目的并不是要尽善尽美，成为世界大师，而是要在坚固能力和效率的同时，快速提高技能</li>
</ul>
<h4 id="4-分解技能"><a href="#4-分解技能" class="headerlink" title="4.分解技能"></a>4.分解技能</h4><ul>
<li>将技能分解成为一个个更小的，更确定的步骤</li>
<li>学会将步骤进行筛选，把关键的步骤先找出来，再集中时间和精力去学习</li>
</ul>
<h4 id="5-获取工具"><a href="#5-获取工具" class="headerlink" title="5.获取工具"></a>5.获取工具</h4><ul>
<li>设法弄清楚，学习这门技能需要什么样的条件，需要使用什么样的学习用具</li>
<li>只有获得了必备的工具，我们才可能最大限度的利用时间充分学习</li>
</ul>
<h4 id="6-扫除障碍"><a href="#6-扫除障碍" class="headerlink" title="6.扫除障碍"></a>6.扫除障碍</h4><h5 id="1-有些因素会造成障碍："><a href="#1-有些因素会造成障碍：" class="headerlink" title="(1)有些因素会造成障碍："></a>(1)有些因素会造成障碍：</h5><ul>
<li>训练前的准备工作：训练前找不到工具，或者没有合适的工具</li>
<li>使用临时训练工具</li>
<li>环境干扰：例如开着的电视，突然响起的电话，刚刚收到的电子邮件</li>
<li>情绪障碍：例如害怕，怀疑，害羞</li>
</ul>
<h5 id="2-靠意志力去克服这些障碍不见的是明智的做法，最好是事先清除这些障碍"><a href="#2-靠意志力去克服这些障碍不见的是明智的做法，最好是事先清除这些障碍" class="headerlink" title="(2)靠意志力去克服这些障碍不见的是明智的做法，最好是事先清除这些障碍"></a>(2)靠意志力去克服这些障碍不见的是明智的做法，最好是事先清除这些障碍</h5><h4 id="7-腾出时间"><a href="#7-腾出时间" class="headerlink" title="7.腾出时间"></a>7.腾出时间</h4><ul>
<li>筛选出低效的时间，并将它淘汰掉</li>
<li>一旦训练开始，就别停下来</li>
</ul>
<h4 id="8-及时反馈"><a href="#8-及时反馈" class="headerlink" title="8.及时反馈"></a>8.及时反馈</h4><ul>
<li>及时反馈是指尽可能快的了解你在技能习得中的表现</li>
<li>快速反馈有助于快速习得技能</li>
</ul>
<h4 id="9-计时训练"><a href="#9-计时训练" class="headerlink" title="9.计时训练"></a>9.计时训练</h4><ul>
<li>分段计时训练，设置好时间，比如20分钟，然后准备开始练习</li>
<li>制定规则，一旦计时开始，中途就不要停下来</li>
<li>持续训练的时间越长，技能习得就越快</li>
<li>每天腾出3～5次这样的分段计时训练，短时间内就会看到明显的进步</li>
</ul>
<h4 id="10-数量与速度"><a href="#10-数量与速度" class="headerlink" title="10.数量与速度"></a>10.数量与速度</h4><ul>
<li>刚开始习得技能时，不要寻求尽善尽美，因为那样会让人产生挫败感</li>
<li>应该保证训练量和训练速度，这才是重要的</li>
<li>刚开始学习时，不要盲目追求质量，相反，必要的训练量和训练速度才是制胜法宝，练得多，练的快，才能学的快</li>
<li>训练时要报纸良好的状态，只要做的至少在80%～90%的训练时间内持续保持良好的训练状态，就能加快技能习得</li>
</ul>
<h4 id="11-沉浸法"><a href="#11-沉浸法" class="headerlink" title="11.沉浸法"></a>11.沉浸法</h4><p>沉浸法是指通过完全改变周围学习环境的方式，达到专注持久学习的目的，例如想学法语，那就搬到法国住上几个月</p>
<h3 id="三-有效学习的10个方法"><a href="#三-有效学习的10个方法" class="headerlink" title="三.有效学习的10个方法"></a>三.有效学习的10个方法</h3><h4 id="1-收集信息"><a href="#1-收集信息" class="headerlink" title="1.收集信息"></a>1.收集信息</h4><ul>
<li>实践前，查阅一下和这门技能相关的信息是十分必要的</li>
</ul>
<h4 id="2-克服困难"><a href="#2-克服困难" class="headerlink" title="2.克服困难"></a>2.克服困难</h4><ul>
<li>在习得技能过程中会遇到对有的概念，方法理解不了的地方，产生困惑，此时克服困难继续学习，之后会把前面的困惑一一解开的</li>
</ul>
<h4 id="3-关联类比"><a href="#3-关联类比" class="headerlink" title="3.关联类比"></a>3.关联类比</h4><ul>
<li>在学习的过程中，会出现理论和方法，将它们成为“心智模式”</li>
<li>有时在学习过程中会遇到新的事物好像是自己熟悉的，此时将此事物成为“心智勾连”</li>
<li>自己找到的心智模式和心智勾连越多，就越容易在技能训练中获益</li>
</ul>
<h4 id="4-逆向思维"><a href="#4-逆向思维" class="headerlink" title="4.逆向思维"></a>4.逆向思维</h4><ul>
<li>学习新技能之前，不幻想自己学的多完美，多设想最坏的结局，这种思维方式称为“违反直觉的思维方式”，它有助于我们深入了解技能</li>
</ul>
<h4 id="5-咨询交流"><a href="#5-咨询交流" class="headerlink" title="5.咨询交流"></a>5.咨询交流</h4><ul>
<li>在学习技能之前，有必要和内行聊一聊，这样我们可以提前预知技能训练中的每个阶段会遇到的问题，消除对技能学习的疑虑和误解</li>
</ul>
<h4 id="6-排除干扰"><a href="#6-排除干扰" class="headerlink" title="6.排除干扰"></a>6.排除干扰</h4><ul>
<li>我们应该尽量排除电子干扰和生物干扰</li>
<li>电视，手机，网络属于电子干扰因素</li>
<li>家人，同事，宠物属于生物干扰因素</li>
<li>干扰因素越少，技能习得就越有效</li>
</ul>
<h4 id="7-间隔重复"><a href="#7-间隔重复" class="headerlink" title="7.间隔重复"></a>7.间隔重复</h4><ul>
<li>间隔重复有助于大脑将所学知识进行巩固并长时保存</li>
<li>对于记忆有难度的信息，更要经常复习</li>
</ul>
<h4 id="8-创建定式"><a href="#8-创建定式" class="headerlink" title="8.创建定式"></a>8.创建定式</h4><ul>
<li>大多数技能学习都有一套固定的模式：确定项目，着手准备，坚持学习等</li>
<li>建立一套简单的定式可以让自己比较轻松的了解其中关键的环节</li>
<li>罗列清单方便我们记忆学习要点，使技能训练的流程更加系统化</li>
</ul>
<h4 id="9-预期测试"><a href="#9-预期测试" class="headerlink" title="9.预期测试"></a>9.预期测试</h4><h5 id="1-预期测试是指依靠已知经验，再尝试实践前假设接下来会发生什么变化或者产生的结果"><a href="#1-预期测试是指依靠已知经验，再尝试实践前假设接下来会发生什么变化或者产生的结果" class="headerlink" title="(1)预期测试是指依靠已知经验，再尝试实践前假设接下来会发生什么变化或者产生的结果"></a>(1)预期测试是指依靠已知经验，再尝试实践前假设接下来会发生什么变化或者产生的结果</h5><h5 id="2-预期测试结果随着四个因素的变化而变化"><a href="#2-预期测试结果随着四个因素的变化而变化" class="headerlink" title="(2)预期测试结果随着四个因素的变化而变化"></a>(2)预期测试结果随着四个因素的变化而变化</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(1)观察：你最近在关注什么</span><br><span class="line">(2)经历：你对这个领域了解多少</span><br><span class="line">(3)假设：怎样做才会更进一步</span><br><span class="line">(4)测试：下一步你有什么新尝试</span><br></pre></td></tr></table></figure>

<h4 id="10-尊重生理"><a href="#10-尊重生理" class="headerlink" title="10.尊重生理"></a>10.尊重生理</h4><ul>
<li>足够的睡眠等等，尊重生理</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">读书笔记</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Spark Streaming实战：处理来自flume pull方式发来的数据"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E5%A4%84%E7%90%86%E6%9D%A5%E8%87%AAflume%20pull%E6%96%B9%E5%BC%8F%E5%8F%91%E6%9D%A5%E7%9A%84%E6%95%B0%E6%8D%AE/"
    >SparkStreaming实战：处理来自flume pull方式发来的数据</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E5%A4%84%E7%90%86%E6%9D%A5%E8%87%AAflume%20pull%E6%96%B9%E5%BC%8F%E5%8F%91%E6%9D%A5%E7%9A%84%E6%95%B0%E6%8D%AE/" class="article-date">
  <time datetime="2020-03-15T11:00:00.000Z" itemprop="datePublished">2020-03-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spark/">Spark</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="1-需求："><a href="#1-需求：" class="headerlink" title="1.需求："></a>1.需求：</h4><p>处理来自flume pull方式发来的数据</p>
<h4 id="2-代码："><a href="#2-代码：" class="headerlink" title="2.代码："></a>2.代码：</h4><h5 id="1-pom-xml"><a href="#1-pom-xml" class="headerlink" title="(1)pom.xml"></a>(1)pom.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-core --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-core_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-sql --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-sql_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-streaming --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-streaming_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-streaming-flume --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-streaming-flume_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-option2"><a href="#2-option2" class="headerlink" title="(2)option2"></a>(2)option2</h5><p>option2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#定义agent名，source，channel，sink的名称</span><br><span class="line">a1.sources=r1</span><br><span class="line">a1.channels =c1</span><br><span class="line">a1.sinks=k1</span><br><span class="line"></span><br><span class="line">#具体定义source</span><br><span class="line">a1.sources.r1.type= spooldir</span><br><span class="line">a1.sources.r1.spoolDir= /opt/TestFolder/logs</span><br><span class="line">a1.sources.r1.fileSuffix = .COMPLETED</span><br><span class="line"></span><br><span class="line">#具体定义channel1</span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity=10000</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">#具体定义sink</span><br><span class="line">a1.sinks.k1.type = org.apache.spark.streaming.flume.sink.SparkSink</span><br><span class="line">a1.sinks.k1.channels =c1</span><br><span class="line">a1.sinks.k1.hostname=192.168.31.132</span><br><span class="line">a1.sinks.k1.port=1234</span><br><span class="line"></span><br><span class="line">#组装source, channel,sink</span><br><span class="line"></span><br><span class="line">a1.sources.r1.channels = c1</span><br><span class="line">a1.sinks.k1.channel =c1</span><br></pre></td></tr></table></figure>

<h5 id="3-FlumeLogPul-scala"><a href="#3-FlumeLogPul-scala" class="headerlink" title="(3)FlumeLogPul.scala"></a>(3)FlumeLogPul.scala</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Level</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.SparkConf</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.StreamingContext</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.Seconds</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.flume.FlumeUtils</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.storage.StorageLevel</span><br><span class="line"></span><br><span class="line">object FlumeLogPull &#123;</span><br><span class="line">  <span class="function">def <span class="title">main</span><span class="params">(args: Array[String])</span>: Unit </span>= &#123;</span><br><span class="line">    System.setProperty(<span class="string">&quot;hadoop.home.dir&quot;</span>, <span class="string">&quot;/Users/macbook/Documents/hadoop/hadoop-2.8.4&quot;</span>)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(Level.ERROR)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.eclipse.jetty.server&quot;</span>).setLevel(Level.OFF)</span><br><span class="line"></span><br><span class="line">    val conf = <span class="keyword">new</span> SparkConf().setAppName(<span class="string">&quot;FlumeLogPull&quot;</span>).setMaster(<span class="string">&quot;local[2]&quot;</span>)</span><br><span class="line">    val ssc = <span class="keyword">new</span> StreamingContext(conf,Seconds(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    val flumeEvent = FlumeUtils.createPollingStream(ssc, <span class="string">&quot;192.168.31.211&quot;</span>, <span class="number">1234</span>,StorageLevel.MEMORY_ONLY_SER)</span><br><span class="line"></span><br><span class="line">    val lineDStream = flumeEvent.map( e =&gt; &#123;</span><br><span class="line">      <span class="keyword">new</span> String(e.event.getBody.array)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    lineDStream.print()</span><br><span class="line"></span><br><span class="line">    ssc.start()</span><br><span class="line">    ssc.awaitTermination()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="3-将spark-streaming-flume-sink-2-11-2-1-0-jar拷贝到flume的jar目录下"><a href="#3-将spark-streaming-flume-sink-2-11-2-1-0-jar拷贝到flume的jar目录下" class="headerlink" title="3.将spark-streaming-flume-sink_2.11-2.1.0.jar拷贝到flume的jar目录下"></a>3.将spark-streaming-flume-sink_2.11-2.1.0.jar拷贝到flume的jar目录下</h4><h4 id="4-运行："><a href="#4-运行：" class="headerlink" title="4.运行："></a>4.运行：</h4><h5 id="1-运行SparkStreaming程序："><a href="#1-运行SparkStreaming程序：" class="headerlink" title="(1)运行SparkStreaming程序："></a>(1)运行SparkStreaming程序：</h5><h5 id="2-开启flume"><a href="#2-开启flume" class="headerlink" title="(2)开启flume"></a>(2)开启flume</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/flume-ng agent -n a1 -c conf -f myconf/option2 -Dflume.root.logger=INFO,console</span><br></pre></td></tr></table></figure>

<h4 id="5-结果："><a href="#5-结果：" class="headerlink" title="5.结果："></a>5.结果：</h4> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark/" rel="tag">Spark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark-Streaming/" rel="tag">Spark Streaming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark%E5%AE%9E%E6%88%98/" rel="tag">Spark实战</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Spark Streaming实战：处理来自flume push方式发来的数据"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E5%A4%84%E7%90%86%E6%9D%A5%E8%87%AAflume%20push%E6%96%B9%E5%BC%8F%E5%8F%91%E6%9D%A5%E7%9A%84%E6%95%B0%E6%8D%AE/"
    >SparkStreaming实战：处理来自flume push方式发来的数据</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E5%A4%84%E7%90%86%E6%9D%A5%E8%87%AAflume%20push%E6%96%B9%E5%BC%8F%E5%8F%91%E6%9D%A5%E7%9A%84%E6%95%B0%E6%8D%AE/" class="article-date">
  <time datetime="2020-03-15T10:00:00.000Z" itemprop="datePublished">2020-03-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spark/">Spark</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="1-需求："><a href="#1-需求：" class="headerlink" title="1.需求："></a>1.需求：</h4><p>SparkStreaming处理来自flume push方式发来的数据,即flume将数据推给spark Streaming</p>
<h4 id="2-代码："><a href="#2-代码：" class="headerlink" title="2.代码："></a>2.代码：</h4><h5 id="1-pom-xml"><a href="#1-pom-xml" class="headerlink" title="(1)pom.xml"></a>(1)pom.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-core --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-core_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-sql --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-sql_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-streaming --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-streaming_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-streaming-flume --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-streaming-flume_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-flume文件option"><a href="#2-flume文件option" class="headerlink" title="(2)flume文件option"></a>(2)flume文件option</h5><p>option</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#bin/flume-ng agent -n a1 -f myconf/option -c conf -Dflume.root.logger=INFO,console</span><br><span class="line">#定义agent名，source，channel，sink的名称</span><br><span class="line">a1.sources=r1</span><br><span class="line">a1.channels =c1</span><br><span class="line">a1.sinks=k1</span><br><span class="line"></span><br><span class="line">#具体定义source</span><br><span class="line">a1.sources.r1.type= spooldir</span><br><span class="line">a1.sources.r1.spoolDir= /opt/TestFolder/logs</span><br><span class="line"></span><br><span class="line">#具体定义channel1</span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity=10000</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">#具体定义sink</span><br><span class="line">a1.sinks = k1</span><br><span class="line">a1.sinks.k1.type = avro</span><br><span class="line">a1.sinks.k1.channels =c1</span><br><span class="line">a1.sinks.k1.hostname=192.168.31.211</span><br><span class="line">a1.sinks.k1.port=1236</span><br><span class="line"></span><br><span class="line">#组装source, channel,sink</span><br><span class="line"></span><br><span class="line">a1.sources.r1.channels = c1</span><br><span class="line">a1.sinks.k1.channel =c1</span><br></pre></td></tr></table></figure>
<h5 id="3-MyFlumeStream-scala"><a href="#3-MyFlumeStream-scala" class="headerlink" title="(3) MyFlumeStream.scala"></a>(3) MyFlumeStream.scala</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Level</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.SparkConf</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.StreamingContext</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.Seconds</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.flume.FlumeUtils</span><br><span class="line"></span><br><span class="line">object MyFlumeStream &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function">def <span class="title">main</span><span class="params">(args: Array[String])</span>: Unit </span>= &#123;</span><br><span class="line"></span><br><span class="line">    System.setProperty(<span class="string">&quot;hadoop.home.dir&quot;</span>, <span class="string">&quot;/Users/macbook/Documents/hadoop/hadoop-2.8.4&quot;</span>)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(Level.ERROR)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.eclipse.jetty.server&quot;</span>).setLevel(Level.OFF)</span><br><span class="line"></span><br><span class="line">    val conf = <span class="keyword">new</span> SparkConf().setAppName(<span class="string">&quot;MyFlumeStream&quot;</span>).setMaster(<span class="string">&quot;local[2]&quot;</span>)</span><br><span class="line"></span><br><span class="line">    val ssc = <span class="keyword">new</span> StreamingContext(conf,Seconds(<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建 flume event 从 flume中接收push来的数据 ---&gt; 也是DStream</span></span><br><span class="line">    <span class="comment">//flume将数据push到了 ip 和 端口中</span></span><br><span class="line">    val flumeEventDstream = FlumeUtils.createStream(ssc, <span class="string">&quot;192.168.1.121&quot;</span>, <span class="number">1236</span>)</span><br><span class="line"></span><br><span class="line">    val lineDStream = flumeEventDstream.map( e =&gt; &#123;</span><br><span class="line">      <span class="keyword">new</span> String(e.event.getBody.array)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    lineDStream.print()</span><br><span class="line"></span><br><span class="line">    ssc.start()</span><br><span class="line">    ssc.awaitTermination()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-运行："><a href="#3-运行：" class="headerlink" title="3.运行："></a>3.运行：</h4><h5 id="1-运行SparkStreaming程序："><a href="#1-运行SparkStreaming程序：" class="headerlink" title="(1)运行SparkStreaming程序："></a>(1)运行SparkStreaming程序：</h5><h5 id="2-开启flume"><a href="#2-开启flume" class="headerlink" title="(2)开启flume"></a>(2)开启flume</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/flume-ng agent -n a1 -c conf -f jobconf/option -Dflume.root.logger=INFO,console</span><br></pre></td></tr></table></figure>

<h4 id="4-向-opt-TestFolder-logs中添加数据，查看结果："><a href="#4-向-opt-TestFolder-logs中添加数据，查看结果：" class="headerlink" title="4.向/opt/TestFolder/logs中添加数据，查看结果："></a>4.向/opt/TestFolder/logs中添加数据，查看结果：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp a.txt /opt/TestFolder/logs</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWU0ZjFmZjcxNDA4YmE0OWQucG5n?x-oss-process=image/format,png" alt="添加数据"></p>
<h4 id="5-查看结果"><a href="#5-查看结果" class="headerlink" title="5.查看结果"></a>5.查看结果</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTg3NjUxMjg1MDE2YmQ0MWYucG5n?x-oss-process=image/format,png" alt="结果"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark/" rel="tag">Spark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark-Streaming/" rel="tag">Spark Streaming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark%E5%AE%9E%E6%88%98/" rel="tag">Spark实战</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Spark Streaming实战：处理RDD队列流"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E5%A4%84%E7%90%86RDD%E9%98%9F%E5%88%97%E6%B5%81/"
    >SparkStreaming实战：处理RDD队列流</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E5%A4%84%E7%90%86RDD%E9%98%9F%E5%88%97%E6%B5%81/" class="article-date">
  <time datetime="2020-03-15T09:00:00.000Z" itemprop="datePublished">2020-03-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spark/">Spark</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="1-需求："><a href="#1-需求：" class="headerlink" title="1.需求："></a>1.需求：</h4><p>利用SparkStreaming处理RDD队列流</p>
<h4 id="2-代码："><a href="#2-代码：" class="headerlink" title="2.代码："></a>2.代码：</h4><h5 id="1-pom-xml"><a href="#1-pom-xml" class="headerlink" title="(1)pom.xml"></a>(1)pom.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-core --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-core_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-sql --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-sql_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-streaming --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-streaming_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-RDDQueueStream-scala"><a href="#2-RDDQueueStream-scala" class="headerlink" title="(2)RDDQueueStream.scala"></a>(2)RDDQueueStream.scala</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Level</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.SparkConf</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.StreamingContext</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.Seconds</span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable.Queue</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.RDD</span><br><span class="line"></span><br><span class="line">object RDDQueueStream &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function">def <span class="title">main</span><span class="params">(args: Array[String])</span>: Unit </span>= &#123;</span><br><span class="line"></span><br><span class="line">    System.setProperty(<span class="string">&quot;hadoop.home.dir&quot;</span>, <span class="string">&quot;/Users/macbook/Documents/hadoop/hadoop-2.8.4&quot;</span>)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(Level.ERROR)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.eclipse.jetty.server&quot;</span>).setLevel(Level.OFF)</span><br><span class="line"></span><br><span class="line">    val conf = <span class="keyword">new</span> SparkConf().setAppName(<span class="string">&quot;RDDQueueStream&quot;</span>).setMaster(<span class="string">&quot;local[2]&quot;</span>)</span><br><span class="line"></span><br><span class="line">    val ssc = <span class="keyword">new</span> StreamingContext(conf,Seconds(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//需要一个RDD队列</span></span><br><span class="line">    val rddQueue = <span class="keyword">new</span> Queue[RDD[Int]]()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>( i &lt;- <span class="number">1</span> to <span class="number">3</span>)&#123;</span><br><span class="line">      rddQueue += ssc.sparkContext.makeRDD(<span class="number">1</span> to <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">      Thread.sleep(<span class="number">5000</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//从队列中接收数据 创建DStream</span></span><br><span class="line">    val inputDStream = ssc.queueStream(rddQueue)</span><br><span class="line"></span><br><span class="line">    val result = inputDStream.map(x=&gt;(x,x*<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">    result.print()</span><br><span class="line"></span><br><span class="line">    ssc.start()</span><br><span class="line">    ssc.awaitTermination()</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-运行："><a href="#3-运行：" class="headerlink" title="3.运行："></a>3.运行：</h4><h4 id="4-结果："><a href="#4-结果：" class="headerlink" title="4.结果："></a>4.结果：</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LThlZWFkNzdlOWZlNzBhNDMucG5n?x-oss-process=image/format,png"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark/" rel="tag">Spark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark-Streaming/" rel="tag">Spark Streaming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark%E5%AE%9E%E6%88%98/" rel="tag">Spark实战</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Spark Streaming实战：处理文件流"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6%E6%B5%81/"
    >SparkStreaming实战：处理文件流</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6%E6%B5%81/" class="article-date">
  <time datetime="2020-03-15T08:00:00.000Z" itemprop="datePublished">2020-03-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spark/">Spark</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="1-需求："><a href="#1-需求：" class="headerlink" title="1.需求："></a>1.需求：</h4><p>利用SparkStreaming处理文件流：</p>
<h4 id="2-代码："><a href="#2-代码：" class="headerlink" title="2.代码："></a>2.代码：</h4><h5 id="1-pom-xml"><a href="#1-pom-xml" class="headerlink" title="(1)pom.xml"></a>(1)pom.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-core --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-core_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-sql --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-sql_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-streaming --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-streaming_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-FileStreaming-scala"><a href="#2-FileStreaming-scala" class="headerlink" title="(2)FileStreaming.scala"></a>(2)FileStreaming.scala</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> day1211</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Level</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.SparkConf</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.StreamingContext</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.Seconds</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.storage.StorageLevel</span><br><span class="line"></span><br><span class="line">object FileStreaming &#123;</span><br><span class="line">  <span class="function">def <span class="title">main</span><span class="params">(args: Array[String])</span>: Unit </span>= &#123;</span><br><span class="line"></span><br><span class="line">    System.setProperty(<span class="string">&quot;hadoop.home.dir&quot;</span>, <span class="string">&quot;/Users/macbook/Documents/hadoop/hadoop-2.8.4&quot;</span>)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(Level.ERROR)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.eclipse.jetty.server&quot;</span>).setLevel(Level.OFF)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//local[2]代表开启两个线程</span></span><br><span class="line">    val conf = <span class="keyword">new</span> SparkConf().setAppName(<span class="string">&quot;MyNetwordWordCount&quot;</span>).setMaster(<span class="string">&quot;local[2]&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//接收两个参数，第一个conf，第二个是采样时间间隔</span></span><br><span class="line">    val ssc = <span class="keyword">new</span> StreamingContext(conf, Seconds(<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//监控目录 如果文件系统发生变化 就读取进来</span></span><br><span class="line">    val lines = ssc.textFileStream(<span class="string">&quot;/Users/macbook/TestInfo/test_file_stream&quot;</span>)</span><br><span class="line"></span><br><span class="line">    lines.print()</span><br><span class="line"></span><br><span class="line">    ssc.start()</span><br><span class="line">    ssc.awaitTermination()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="3-运行"><a href="#3-运行" class="headerlink" title="3.运行"></a>3.运行</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWRiNDkxMjllNTQ2Zjc3ZWUucG5n?x-oss-process=image/format,png"></p>
<h4 id="4-结果："><a href="#4-结果：" class="headerlink" title="4.结果："></a>4.结果：</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTlkMmRjOWMyMTdhNjUwZmMucG5n?x-oss-process=image/format,png" alt="image.png"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark/" rel="tag">Spark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark-Streaming/" rel="tag">Spark Streaming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark%E5%AE%9E%E6%88%98/" rel="tag">Spark实战</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Spark Streaming实战：集成Spark SQL，使用SQL语句进行WordCount"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E9%9B%86%E6%88%90Spark%20SQL%EF%BC%8C%E4%BD%BF%E7%94%A8SQL%E8%AF%AD%E5%8F%A5%E8%BF%9B%E8%A1%8CWordCount/"
    >SparkStearming实战：集成Spark SQL，使用SQL语句进行WordCount</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E9%9B%86%E6%88%90Spark%20SQL%EF%BC%8C%E4%BD%BF%E7%94%A8SQL%E8%AF%AD%E5%8F%A5%E8%BF%9B%E8%A1%8CWordCount/" class="article-date">
  <time datetime="2020-03-15T06:00:00.000Z" itemprop="datePublished">2020-03-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spark/">Spark</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="1-需求："><a href="#1-需求：" class="headerlink" title="1.需求："></a>1.需求：</h4><p>集成Spark SQL，使用SQL语句进行WordCount</p>
<h4 id="2-代码："><a href="#2-代码：" class="headerlink" title="2.代码："></a>2.代码：</h4><h5 id="1-pom-xml"><a href="#1-pom-xml" class="headerlink" title="(1)pom.xml"></a>(1)pom.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-core --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-core_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-sql --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-sql_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-streaming --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-streaming_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-MyNetwordWordCountWithSQL-scala"><a href="#2-MyNetwordWordCountWithSQL-scala" class="headerlink" title="(2)MyNetwordWordCountWithSQL.scala"></a>(2)MyNetwordWordCountWithSQL.scala</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Level</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.SparkConf</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.StreamingContext</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.Seconds</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.storage.StorageLevel</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.SparkSession</span><br><span class="line"></span><br><span class="line">object MyNetwordWordCountWithSQL &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function">def <span class="title">main</span><span class="params">(args: Array[String])</span>: Unit </span>= &#123;</span><br><span class="line">    System.setProperty(<span class="string">&quot;hadoop.home.dir&quot;</span>, <span class="string">&quot;/Users/macbook/Documents/hadoop/hadoop-2.8.4&quot;</span>)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(Level.ERROR)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.eclipse.jetty.server&quot;</span>).setLevel(Level.OFF)</span><br><span class="line"></span><br><span class="line">    val conf = <span class="keyword">new</span> SparkConf().setMaster(<span class="string">&quot;local[2]&quot;</span>).setAppName(<span class="string">&quot;MyNetwordWordCountWithSQL&quot;</span>)</span><br><span class="line"></span><br><span class="line">    val ssc = <span class="keyword">new</span> StreamingContext(conf,Seconds(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">    val lines = ssc.socketTextStream(<span class="string">&quot;192.168.1.121&quot;</span>,<span class="number">1235</span>,StorageLevel.MEMORY_ONLY)</span><br><span class="line"></span><br><span class="line">    val words = lines.flatMap(_.split(<span class="string">&quot; &quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//集成Spark SQL 使用SQL语句进行WordCount</span></span><br><span class="line">    words.foreachRDD( rdd =&gt; &#123;</span><br><span class="line"></span><br><span class="line">      val spark = SparkSession.builder().config(rdd.sparkContext.getConf).getOrCreate()</span><br><span class="line"></span><br><span class="line">      <span class="keyword">import</span> spark.implicits._</span><br><span class="line">      val df1 = rdd.toDF(<span class="string">&quot;word&quot;</span>)</span><br><span class="line"></span><br><span class="line">      df1.createOrReplaceTempView(<span class="string">&quot;words&quot;</span>)</span><br><span class="line"></span><br><span class="line">      spark.sql(<span class="string">&quot;select word , count(1) from words group by word&quot;</span>).show()</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    ssc.start()</span><br><span class="line">    ssc.awaitTermination()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-运行："><a href="#3-运行：" class="headerlink" title="3.运行："></a>3.运行：</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTdjMjdmMmRiNWVlZDUwOGMucG5n?x-oss-process=image/format,png"></p>
<h4 id="4-结果："><a href="#4-结果：" class="headerlink" title="4.结果："></a>4.结果：</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWQ0YmIwNTFkOGY5MmY1ZjIucG5n?x-oss-process=image/format,png"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark/" rel="tag">Spark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark-Streaming/" rel="tag">Spark Streaming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark%E5%AE%9E%E6%88%98/" rel="tag">Spark实战</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Spark Streaming实战：设置检查点，写一个wordcount程序并计数，计算端口号1235中的信息"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E8%AE%BE%E7%BD%AE%E6%A3%80%E6%9F%A5%E7%82%B9%EF%BC%8C%E5%86%99%E4%B8%80%E4%B8%AAwordcount%E7%A8%8B%E5%BA%8F%E5%B9%B6%E8%AE%A1%E6%95%B0%EF%BC%8C%E8%AE%A1%E7%AE%97%E7%AB%AF%E5%8F%A3%E5%8F%B71235%E4%B8%AD%E7%9A%84%E4%BF%A1%E6%81%AF/"
    >Spark Streaming实战：设置检查点，写一个wordcount程序并计数，计算端口号1235中的信息</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E8%AE%BE%E7%BD%AE%E6%A3%80%E6%9F%A5%E7%82%B9%EF%BC%8C%E5%86%99%E4%B8%80%E4%B8%AAwordcount%E7%A8%8B%E5%BA%8F%E5%B9%B6%E8%AE%A1%E6%95%B0%EF%BC%8C%E8%AE%A1%E7%AE%97%E7%AB%AF%E5%8F%A3%E5%8F%B71235%E4%B8%AD%E7%9A%84%E4%BF%A1%E6%81%AF/" class="article-date">
  <time datetime="2020-03-15T04:00:00.000Z" itemprop="datePublished">2020-03-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spark/">Spark</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="1-需求："><a href="#1-需求：" class="headerlink" title="1.需求："></a>1.需求：</h4><p>用spark Streaming写一个wordcount程序，计算发往端口号1235中的信息(单词计数)</p>
<h4 id="2-代码："><a href="#2-代码：" class="headerlink" title="2.代码："></a>2.代码：</h4><h5 id="1-pom-xml"><a href="#1-pom-xml" class="headerlink" title="(1)pom.xml"></a>(1)pom.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-core --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-core_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-sql --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-sql_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-streaming --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-streaming_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-MyTotalNetworkWordCount-scala"><a href="#2-MyTotalNetworkWordCount-scala" class="headerlink" title="(2)MyTotalNetworkWordCount.scala"></a>(2)MyTotalNetworkWordCount.scala</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> day1211</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Level</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.SparkConf</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.StreamingContext</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.Seconds</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.storage.StorageLevel</span><br><span class="line"></span><br><span class="line">object MyTotalNetworkWordCount &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function">def <span class="title">main</span><span class="params">(args: Array[String])</span>: Unit </span>= &#123;</span><br><span class="line"></span><br><span class="line">    System.setProperty(<span class="string">&quot;hadoop.home.dir&quot;</span>, <span class="string">&quot;/Users/macbook/Documents/hadoop/hadoop-2.8.4&quot;</span>)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(Level.ERROR)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.eclipse.jetty.server&quot;</span>).setLevel(Level.OFF)</span><br><span class="line"></span><br><span class="line">    val conf = <span class="keyword">new</span> SparkConf().setMaster(<span class="string">&quot;local[2]&quot;</span>).setAppName(<span class="string">&quot;MyTotalNetworkWordCount&quot;</span>)</span><br><span class="line"></span><br><span class="line">    val ssc = <span class="keyword">new</span> StreamingContext(conf,Seconds(<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置检查点目录，保存之前的状态信息</span></span><br><span class="line">    ssc.checkpoint(<span class="string">&quot;hdfs://192.168.1.121:9000/TestFile/chkp0826&quot;</span>)</span><br><span class="line"></span><br><span class="line">    val lines = ssc.socketTextStream(<span class="string">&quot;192.168.1.121&quot;</span>, <span class="number">1235</span>, StorageLevel.MEMORY_ONLY)</span><br><span class="line"></span><br><span class="line">    val words = lines.flatMap(_.split(<span class="string">&quot; &quot;</span>))</span><br><span class="line"></span><br><span class="line">    val wordPair = words.map((_,<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 两个参数：</span></span><br><span class="line"><span class="comment">     * 第一个参数：当前的值是多少</span></span><br><span class="line"><span class="comment">     * 第二个参数：之前的结果是多少</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    val addFunc = (curreValues:Seq[Int],previousValues:Option[Int]) =&gt; &#123;</span><br><span class="line">      <span class="comment">//进行累加运算</span></span><br><span class="line">      <span class="comment">// 1、把当前值的序列进行累加</span></span><br><span class="line">      val currentTotal = curreValues.sum</span><br><span class="line"></span><br><span class="line">      <span class="comment">//2、在之前的值上再累加</span></span><br><span class="line"></span><br><span class="line">      Some( currentTotal + previousValues.getOrElse(<span class="number">0</span>) )</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//进行累加运算</span></span><br><span class="line">    val total = wordPair.updateStateByKey(addFunc)</span><br><span class="line"></span><br><span class="line">    total.print()</span><br><span class="line"></span><br><span class="line">    ssc.start()</span><br><span class="line">    ssc.awaitTermination()</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="3-运行程序，并往端口号1235发送信息："><a href="#3-运行程序，并往端口号1235发送信息：" class="headerlink" title="3.运行程序，并往端口号1235发送信息："></a>3.运行程序，并往端口号1235发送信息：</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LThlNmUyYTFiNTk2YTdmNWYucG5n?x-oss-process=image/format,png"></p>
<h4 id="4-结果："><a href="#4-结果：" class="headerlink" title="4.结果："></a>4.结果：</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTUzNTc3ZTZiYzc0OGM4NzUucG5n?x-oss-process=image/format,png"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark/" rel="tag">Spark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark-Streaming/" rel="tag">Spark Streaming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark%E5%AE%9E%E6%88%98/" rel="tag">Spark实战</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Spark Streaming实战：窗口操作，每10秒，把过去30秒的数据取出来(读取端口号1235中的数据)"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E7%AA%97%E5%8F%A3%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%AF%8F10%E7%A7%92%EF%BC%8C%E6%8A%8A%E8%BF%87%E5%8E%BB30%E7%A7%92%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8F%96%E5%87%BA%E6%9D%A5(%E8%AF%BB%E5%8F%96%E7%AB%AF%E5%8F%A3%E5%8F%B71235%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE)/"
    >Spark Streaming实战：窗口操作，每10秒，把过去30秒的数据取出来(读取端口号1235中的数据)</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E7%AA%97%E5%8F%A3%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%AF%8F10%E7%A7%92%EF%BC%8C%E6%8A%8A%E8%BF%87%E5%8E%BB30%E7%A7%92%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8F%96%E5%87%BA%E6%9D%A5(%E8%AF%BB%E5%8F%96%E7%AB%AF%E5%8F%A3%E5%8F%B71235%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE)/" class="article-date">
  <time datetime="2020-03-15T04:00:00.000Z" itemprop="datePublished">2020-03-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spark/">Spark</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="1-需求："><a href="#1-需求：" class="headerlink" title="1.需求："></a>1.需求：</h4><p>窗口操作，每10秒，把过去30秒的数据取出来</p>
<ul>
<li>窗口长度：30秒</li>
<li>滑动距离：10秒</li>
</ul>
<h4 id="2-代码："><a href="#2-代码：" class="headerlink" title="2.代码："></a>2.代码：</h4><h5 id="1-pom-xml"><a href="#1-pom-xml" class="headerlink" title="(1)pom.xml"></a>(1)pom.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-core --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-core_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-sql --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-sql_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-streaming --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-streaming_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-MyNetWorkWordCountByWindow-scala"><a href="#2-MyNetWorkWordCountByWindow-scala" class="headerlink" title="(2)MyNetWorkWordCountByWindow.scala"></a>(2)MyNetWorkWordCountByWindow.scala</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> day1211</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Level</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.SparkConf</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.StreamingContext</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.Seconds</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.storage.StorageLevel</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 需求：每10秒，把过去30秒的数据取出来</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 窗口长度：30秒</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 滑动距离：10秒</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">object MyNetWorkWordCountByWindow &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function">def <span class="title">main</span><span class="params">(args: Array[String])</span>: Unit </span>= &#123;</span><br><span class="line">    System.setProperty(<span class="string">&quot;hadoop.home.dir&quot;</span>, <span class="string">&quot;/Users/macbook/Documents/hadoop/hadoop-2.8.4&quot;</span>)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(Level.ERROR)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.eclipse.jetty.server&quot;</span>).setLevel(Level.OFF)</span><br><span class="line"></span><br><span class="line">    val conf = <span class="keyword">new</span> SparkConf().setAppName(<span class="string">&quot;MyNetWorkWordCountByWindow&quot;</span>).setMaster(<span class="string">&quot;local[2]&quot;</span>)</span><br><span class="line"></span><br><span class="line">    val ssc = <span class="keyword">new</span> StreamingContext(conf,Seconds(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    val lines = ssc.socketTextStream(<span class="string">&quot;192.168.1.121&quot;</span>, <span class="number">1235</span>, StorageLevel.MEMORY_ONLY)</span><br><span class="line"></span><br><span class="line">    val words = lines.flatMap(_.split(<span class="string">&quot; &quot;</span>)).map((_,<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * reduce By Key And Window</span></span><br><span class="line"><span class="comment">     * 三个参数</span></span><br><span class="line"><span class="comment">     * 1、要进行什么操作</span></span><br><span class="line"><span class="comment">     * 2、窗口的大小</span></span><br><span class="line"><span class="comment">     * 3、窗口滑动的距离</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    val result = words.reduceByKeyAndWindow((x:Int,y:Int)=&gt;(x+y),Seconds(<span class="number">30</span>),Seconds(<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">    result.print()</span><br><span class="line"></span><br><span class="line">    ssc.start()</span><br><span class="line">    ssc.awaitTermination()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-运行：往端口中发送数据"><a href="#3-运行：往端口中发送数据" class="headerlink" title="3.运行：往端口中发送数据"></a>3.运行：往端口中发送数据</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTc2MmZiN2RhYjBkMTRlMjAucG5n?x-oss-process=image/format,png"></p>
<h4 id="4-结果"><a href="#4-结果" class="headerlink" title="4.结果"></a>4.结果</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWZhMTEyNzljZjNjNGM0MDUucG5n?x-oss-process=image/format,png" alt="image.png"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark/" rel="tag">Spark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark-Streaming/" rel="tag">Spark Streaming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark%E5%AE%9E%E6%88%98/" rel="tag">Spark实战</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Spark Streaming实战：写一个wordcount程序，统计从netcat中向端口发送的数据"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E5%86%99%E4%B8%80%E4%B8%AAwordcount%E7%A8%8B%E5%BA%8F%EF%BC%8C%E7%BB%9F%E8%AE%A1%E4%BB%8Enetcat%E4%B8%AD%E5%90%91%E7%AB%AF%E5%8F%A3%E5%8F%91%E9%80%81%E7%9A%84%E6%95%B0%E6%8D%AE/"
    >Spark Streaming实战:写一个wordcount程序，统计从netcat中向端口发送的数据</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/03/15/Spark%20Streaming%E5%AE%9E%E6%88%98%EF%BC%9A%E5%86%99%E4%B8%80%E4%B8%AAwordcount%E7%A8%8B%E5%BA%8F%EF%BC%8C%E7%BB%9F%E8%AE%A1%E4%BB%8Enetcat%E4%B8%AD%E5%90%91%E7%AB%AF%E5%8F%A3%E5%8F%91%E9%80%81%E7%9A%84%E6%95%B0%E6%8D%AE/" class="article-date">
  <time datetime="2020-03-15T03:00:00.000Z" itemprop="datePublished">2020-03-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spark/">Spark</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="1-需求："><a href="#1-需求：" class="headerlink" title="1.需求："></a>1.需求：</h4><p>通过spark streaming统计端口号1234中的信息</p>
<h4 id="2-编写代码："><a href="#2-编写代码：" class="headerlink" title="2.编写代码："></a>2.编写代码：</h4><h5 id="1-添加依赖："><a href="#1-添加依赖：" class="headerlink" title="(1)添加依赖："></a>(1)添加依赖：</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-core --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-core_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-sql --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-sql_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-streaming --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-streaming_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>记得去掉spark-streaming中的<scope>provided</scope></p>
<h5 id="2-MyNetwordWordCount-scala"><a href="#2-MyNetwordWordCount-scala" class="headerlink" title="(2)MyNetwordWordCount.scala"></a>(2)MyNetwordWordCount.scala</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> day1211</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Level</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.SparkConf</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.StreamingContext</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.Seconds</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.storage.StorageLevel</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 知识点汇总：</span></span><br><span class="line"><span class="comment"> * 1、创建StreamingContext--&gt;本质，核心：创建DStream</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 2、DStream的表现形式：就是一个RDD</span></span><br><span class="line"><span class="comment"> * 	操作DSteam和操作RDD是一样的。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 3、使用DStream把连续的数据流编程不连续的RDD</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">object MyNetwordWordCount &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function">def <span class="title">main</span><span class="params">(args: Array[String])</span>: Unit </span>= &#123;</span><br><span class="line">    System.setProperty(<span class="string">&quot;hadoop.home.dir&quot;</span>, <span class="string">&quot;/Users/macbook/Documents/hadoop/hadoop-2.8.4&quot;</span>)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(Level.ERROR)</span><br><span class="line">    Logger.getLogger(<span class="string">&quot;org.eclipse.jetty.server&quot;</span>).setLevel(Level.OFF)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//local[2]代表开启两个线程</span></span><br><span class="line">    val conf = <span class="keyword">new</span> SparkConf().setAppName(<span class="string">&quot;MyNetwordWordCount&quot;</span>).setMaster(<span class="string">&quot;local[2]&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//接收两个参数，第一个conf，第二个是采样时间间隔</span></span><br><span class="line">    val ssc = <span class="keyword">new</span> StreamingContext(conf,Seconds(<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建DStream 从netcat服务器上接收数据 因为接收字符串，所以使用textStream</span></span><br><span class="line">    val lines = ssc.socketTextStream(<span class="string">&quot;192.168.1.121&quot;</span>, <span class="number">1234</span>, StorageLevel.MEMORY_ONLY)</span><br><span class="line"></span><br><span class="line">    val words = lines.flatMap(_.split(<span class="string">&quot; &quot;</span>))</span><br><span class="line"></span><br><span class="line">    val wordCount = words.map((_,<span class="number">1</span>)).reduceByKey(_+_)</span><br><span class="line">    <span class="comment">//    val wordCount = words.transform(x =&gt; x.map((_,1))).reduceByKey(_+_)</span></span><br><span class="line"></span><br><span class="line">    wordCount.print()</span><br><span class="line"></span><br><span class="line">    ssc.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment">//等待任务结束</span></span><br><span class="line">    ssc.awaitTermination()</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-运行此程序，同时用netcat向1234端口号中发送信息，"><a href="#3-运行此程序，同时用netcat向1234端口号中发送信息，" class="headerlink" title="3.运行此程序，同时用netcat向1234端口号中发送信息，"></a>3.运行此程序，同时用netcat向1234端口号中发送信息，</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWIxM2Q3NTIzMjBkNzk0YWIucG5n?x-oss-process=image/format,png" alt="1"></p>
<h4 id="4-结果："><a href="#4-结果：" class="headerlink" title="4.结果："></a>4.结果：</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTE2OWFkYWI4MzM4ODc2ZDcucG5n?x-oss-process=image/format,png" alt="1"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark/" rel="tag">Spark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark-Streaming/" rel="tag">Spark Streaming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spark%E5%AE%9E%E6%88%98/" rel="tag">Spark实战</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/6/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><a class="extend next" rel="next" href="/page/8/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2021
        <i class="ri-heart-fill heart_icon"></i> Movle
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="https://img-blog.csdnimg.cn/20200609161448519.jpg" alt="Movle"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>