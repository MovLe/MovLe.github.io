<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> Movle</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="https://img-blog.csdnimg.cn/20200609161448519.jpg" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="https://img-blog.csdnimg.cn/2020060916514052.png" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Movle</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['种一棵树，最好的时机是十年前，其次是现在', '人必有痴，而后有成', '今天，我没有浑浑噩噩的度过'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-Sqoop一些常用命令及参数"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/09/Sqoop%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%8F%8A%E5%8F%82%E6%95%B0/"
    >Sqoop一些常用命令及参数</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/05/09/Sqoop%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%8F%8A%E5%8F%82%E6%95%B0/" class="article-date">
  <time datetime="2019-05-09T07:00:00.000Z" itemprop="datePublished">2019-05-09</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Sqoop/">Sqoop</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="一-常用命令列举"><a href="#一-常用命令列举" class="headerlink" title="一.常用命令列举"></a>一.常用命令列举</h3><p>这里列出了一部分Sqoop操作时的常用参数，以供参考，需要深入学习的可以参看对应类的源代码。</p>
<table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">命令</th>
<th align="center">类</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">import</td>
<td align="center">ImportTool</td>
<td align="center">将数据导入到集群</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">export</td>
<td align="center">ExportTool</td>
<td align="center">将集群数据导出</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">codegen</td>
<td align="center">CodeGenTool</td>
<td align="center">获取数据库中某张表数据生成Java并打包Jar</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">create-hive-table</td>
<td align="center">CreateHiveTableTool</td>
<td align="center">创建Hive表</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">eval</td>
<td align="center">EvalSqlTool</td>
<td align="center">查看SQL执行结果</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">import-all-tables</td>
<td align="center">ImportAllTablesTool</td>
<td align="center">导入某个数据库下所有表到HDFS中</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">job</td>
<td align="center">JobTool</td>
<td align="center">用来生成一个sqoop的任务，生成后，该任务并不执行，除非使用命令执行该任务。</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">list-databases</td>
<td align="center">ListDatabasesTool</td>
<td align="center">列出所有数据库名</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">list-tables</td>
<td align="center">ListTablesTool</td>
<td align="center">列出某个数据库下所有表</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">merge</td>
<td align="center">MergeTool</td>
<td align="center">将HDFS中不同目录下面的数据合在一起，并存放在指定的目录中</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">metastore</td>
<td align="center">MetastoreTool</td>
<td align="center">记录sqoop job的元数据信息，如果不启动metastore实例，则默认的元数据存储目录为：~/.sqoop，如果要更改存储目录，可以在配置文件sqoop-site.xml中进行更改。</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">help</td>
<td align="center">HelpTool</td>
<td align="center">打印sqoop帮助信息</td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">version</td>
<td align="center">VersionTool</td>
<td align="center">打印sqoop版本信息</td>
</tr>
</tbody></table>
<h3 id="二-命令-amp-参数详解"><a href="#二-命令-amp-参数详解" class="headerlink" title="二.命令&amp;参数详解"></a>二.命令&amp;参数详解</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;首先来了解一下公用的参数，所谓公用参数，就是大多数命令都支持的参数。</p>
<h4 id="1-公用参数：数据库连接"><a href="#1-公用参数：数据库连接" class="headerlink" title="1.公用参数：数据库连接"></a>1.公用参数：数据库连接</h4><table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">–connect</td>
<td align="center">连接关系型数据库的URL</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">–connection-manager</td>
<td align="center">指定要使用的连接管理类</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">–driver</td>
<td align="center">Hadoop根目录</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">–help</td>
<td align="center">打印帮助信息</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">–password</td>
<td align="center">连接数据库的密码</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">–username</td>
<td align="center">连接数据库的用户名</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">–verbose</td>
<td align="center">在控制台打印出详细信息</td>
</tr>
</tbody></table>
<h4 id="2-公用参数：import"><a href="#2-公用参数：import" class="headerlink" title="2.公用参数：import"></a>2.公用参数：import</h4><table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">–enclosed-by <char></td>
<td align="center">给字段值前加上指定的字符</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">–escaped-by <char></td>
<td align="center">对字段中的双引号加转义符</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">–fields-terminated-by <char></td>
<td align="center">设定每个字段是以什么符号作为结束，默认为逗号</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">–lines-terminated-by <char></td>
<td align="center">设定每行记录之间的分隔符，默认是\n</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">–mysql-delimiters</td>
<td align="center">Mysql默认的分隔符设置，字段之间以逗号分隔，行之间以\n分隔，默认转义符是\，字段值以单引号包裹。</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">–optionally-enclosed-by <char></td>
<td align="center">给带有双引号或单引号的字段值前后加上指定字符</td>
</tr>
</tbody></table>
<h4 id="3-公用参数：export"><a href="#3-公用参数：export" class="headerlink" title="3.公用参数：export"></a>3.公用参数：export</h4><table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">–input-enclosed-by <char></td>
<td align="center">对字段值前后加上指定字符</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">–input-escaped-by <char></td>
<td align="center">对含有转移符的字段做转义处理</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">–input-fields-terminated-by <char></td>
<td align="center">字段之间的分隔符</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">–input-lines-terminated-by <char></td>
<td align="center">行之间的分隔符</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">–input-optionally-enclosed-by <char></td>
<td align="center">给带有双引号或单引号的字段前后加上指定字符</td>
</tr>
</tbody></table>
<h4 id="4-公用参数：hive"><a href="#4-公用参数：hive" class="headerlink" title="4.公用参数：hive"></a>4.公用参数：hive</h4><table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">–hive-delims-replacement <arg></td>
<td align="center">用自定义的字符串替换掉数据中的\r\n和\013 \010等字符</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">–hive-drop-import-delims</td>
<td align="center">在导入数据到hive时，去掉数据中的\r\n\013\010这样的字符</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">–map-column-hive <arg></td>
<td align="center">生成hive表时，可以更改生成字段的数据类型</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">–hive-partition-key</td>
<td align="center">创建分区，后面直接跟分区名，分区字段的默认类型为string</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">–hive-partition-value <v></td>
<td align="center">导入数据时，指定某个分区的值</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">–hive-home <dir></td>
<td align="center">hive的安装目录，可以通过该参数覆盖之前默认配置的目录</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">–hive-import</td>
<td align="center">将数据从关系数据库中导入到hive表中</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">–hive-overwrite</td>
<td align="center">覆盖掉在hive表中已经存在的数据</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">–create-hive-table</td>
<td align="center">默认是false，即，如果目标表已经存在了，那么创建任务失败。</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">–hive-table</td>
<td align="center">后面接要创建的hive表,默认使用MySQL的表名</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">–table</td>
<td align="center">指定关系数据库的表名</td>
</tr>
</tbody></table>
<p>公用参数介绍完之后，我们来按照命令介绍命令对应的特有参数。</p>
<h4 id="5-命令-amp-参数：import"><a href="#5-命令-amp-参数：import" class="headerlink" title="5.命令&amp;参数：import"></a>5.命令&amp;参数：import</h4><p>将关系型数据库中的数据导入到HDFS（包括Hive，HBase）中，如果导入的是Hive，那么当Hive中没有对应表时，则自动创建。</p>
<h5 id="1-命令："><a href="#1-命令：" class="headerlink" title="(1).命令："></a>(1).命令：</h5><p>如：导入数据到hive中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> bin/sqoop import \</span></span><br><span class="line"><span class="bash">--connect jdbc:mysql://hadoop1:3306/Movle \</span></span><br><span class="line"><span class="bash">--username root \</span></span><br><span class="line"><span class="bash">--password 000000 \</span></span><br><span class="line"><span class="bash">--table access \</span></span><br><span class="line"><span class="bash">--hive-import \</span></span><br><span class="line"><span class="bash">--fields-terminated-by <span class="string">&quot;\t&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>如：增量导入数据到hive中，mode=append</p>
<p>append导入：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> bin/sqoop import \</span></span><br><span class="line"><span class="bash">--connect jdbc:mysql://hadoop1:3306/Movle \</span></span><br><span class="line"><span class="bash">--username root \</span></span><br><span class="line"><span class="bash">--password 000000 \</span></span><br><span class="line"><span class="bash">--table aca \</span></span><br><span class="line"><span class="bash">--num-mappers 1 \</span></span><br><span class="line"><span class="bash">--fields-terminated-by <span class="string">&quot;\t&quot;</span> \</span></span><br><span class="line"><span class="bash">--target-dir /user/hive/warehouse/student_hive \</span></span><br><span class="line"><span class="bash">--check-column id \</span></span><br><span class="line"><span class="bash">--incremental append \</span></span><br><span class="line"><span class="bash">--last-value 2</span></span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWVjZTFmNmQ2ZmMwMmFiZDYucG5n?x-oss-process=image/format,png" alt="导入前hive表"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTZjMDU4YzQyMTllZWM5NTcucG5n?x-oss-process=image/format,png" alt="导入前mysql表"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTAwZGZjMGJmZGU2MzNkOWIucG5n?x-oss-process=image/format,png" alt="导入命令"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWIxODE3YzBkMjIzNmQ3NDkucG5n?x-oss-process=image/format,png" alt="导入后hive表"></p>
<p><strong>提示</strong>：append不能与–hive-等参数同时使用（Append mode for hive imports is not yet supported. Please remove the parameter –append-mode）</p>
<p>注:–last-value 2 的意思是标记增量的位置为第二行，也就是说，当数据再次导出的时候，从第二行开始算</p>
<p>注：如果 –last-value N , N &gt; MYSQL中最大行数，则HDFS会创建一个空文件。如果N&lt;=0 , 那么就是所有数据</p>
<p>如：增量导入数据到hdfs中，mode=lastmodified（注：卡住）</p>
<p>先在mysql中建表并插入几条数据：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> create table company.staff_timestamp(id int(4), name varchar(255), sex varchar(255), last_modified timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP);</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> insert into company.staff_timestamp (id, name, sex) values(1, <span class="string">&#x27;AAA&#x27;</span>, <span class="string">&#x27;female&#x27;</span>);</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> insert into company.staff_timestamp (id, name, sex) values(2, <span class="string">&#x27;BBB&#x27;</span>, <span class="string">&#x27;female&#x27;</span>);</span></span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTgxZjQzNjBmMDRmMjU4MzcucG5n?x-oss-process=image/format,png"></p>
<p>先导入一部分数据：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop import \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/company \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--table staff_timestamp \</span><br><span class="line">--delete-target-dir \</span><br><span class="line">--hive-import \</span><br><span class="line">--fields-terminated-by &quot;\t&quot; \</span><br><span class="line">--m 1</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTlkYmIyZDk1MmRmMTY1ZGIucG5n?x-oss-process=image/format,png" alt="导入命令"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWE5NWY3NzZkYzMyMGZmODUucG5n?x-oss-process=image/format,png" alt="导入后hive表"></p>
<p>再增量导入一部分数据:<br>添加mysql中的数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> insert into company.staff_timestamp (id, name, sex) values(3, <span class="string">&#x27;CCC&#x27;</span>, <span class="string">&#x27;female&#x27;</span>);</span></span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTM1NjAyNzg5MGEwODA1ZDkucG5n?x-oss-process=image/format,png" alt="mysql添加数据"></p>
<p>增量导入：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> bin/sqoop import \</span></span><br><span class="line"><span class="bash">--connect jdbc:mysql://hadoop1:3306/company \</span></span><br><span class="line"><span class="bash">--username root \</span></span><br><span class="line"><span class="bash">--password 000000 \</span></span><br><span class="line"><span class="bash">--table staff_timestamp \</span></span><br><span class="line"><span class="bash">--check-column last_modified \</span></span><br><span class="line"><span class="bash">--incremental lastmodified \</span></span><br><span class="line"><span class="bash">--m 1 \</span></span><br><span class="line"><span class="bash">--last-value <span class="string">&quot;2019-12-06 01:48:03.0&quot;</span> \</span></span><br><span class="line"><span class="bash">--append \</span></span><br><span class="line"><span class="bash">--fields-terminated-by <span class="string">&quot;\t&quot;</span> \</span></span><br><span class="line"><span class="bash">--warehouse-dir /user/hive/warehouse/</span></span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTY1NDQ4MmJmY2RiNjc1MzIucG5n?x-oss-process=image/format,png" alt="导入命令"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWUxZTZlZTE5MGRiMDgyMDAucG5n?x-oss-process=image/format,png" alt="增量导入后hive表结果"></p>
<p><strong>提示</strong>：使用lastmodified方式导入数据要指定增量数据是要–append（追加）还是要–merge-key（合并）</p>
<p><strong>提示</strong>：在Hive中，如果不指定输出路径，可以去看以下两个目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. /user/root（此为用户名）</span><br><span class="line">2./user/hive/warehouse  个人配置的目录</span><br></pre></td></tr></table></figure>
<p><strong>提示</strong>：last-value指定的值是会包含于增量导入的数据中</p>
<p>如果卡住，在yarn-site.xml中加入以下配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.resource.memory-mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>20480<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.scheduler.minimum-allocation-mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>2048<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.vmem-pmem-ratio<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-参数："><a href="#2-参数：" class="headerlink" title="(2).参数："></a>(2).参数：</h5><table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">–append</td>
<td align="center">将数据追加到HDFS中已经存在的DataSet中，如果使用该参数，sqoop会把数据先导入到临时文件目录，再合并。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">–as-avrodatafile</td>
<td align="center">将数据导入到一个Avro数据文件中</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">–as-sequencefile</td>
<td align="center">将数据导入到一个sequence文件中</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">–as-textfile</td>
<td align="center">将数据导入到一个普通文本文件中</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">–boundary-query <statement></td>
<td align="center">边界查询，导入的数据为该参数的值（一条sql语句）所执行的结果区间内的数据。</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">–columns &lt;col1, col2, col3&gt;</td>
<td align="center">指定要导入的字段</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">–direct</td>
<td align="center">直接导入模式，使用的是关系数据库自带的导入导出工具，以便加快导入导出过程。</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">–direct-split-size</td>
<td align="center">在使用上面direct直接导入的基础上，对导入的流按字节分块，即达到该阈值就产生一个新的文件</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">–inline-lob-limit</td>
<td align="center">设定大对象数据类型的最大值</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">-m或–num-mappers</td>
<td align="center">启动N个map来并行导入数据，默认4个</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">–query或–e <statement></td>
<td align="center">将查询结果的数据导入，使用时必须伴随参–target-dir，–hive-table，如果查询中有where条件，则条件后必须加上$CONDITIONS关键字</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">–split-by <column-name></td>
<td align="center">按照某一列来切分表的工作单元，不能与–autoreset-to-one-mapper连用（请参考官方文档）</td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">–table <table-name></td>
<td align="center">关系数据库的表名</td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">–target-dir <dir></td>
<td align="center">指定HDFS路径</td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">–warehouse-dir <dir></td>
<td align="center">与14参数不能同时使用，导入数据到HDFS时指定的目录</td>
</tr>
<tr>
<td align="center">16</td>
<td align="center">–where</td>
<td align="center">从关系数据库导入数据时的查询条件</td>
</tr>
<tr>
<td align="center">17</td>
<td align="center">–z或–compress</td>
<td align="center">允许压缩</td>
</tr>
<tr>
<td align="center">18</td>
<td align="center">–compression-codec</td>
<td align="center">指定hadoop压缩编码类，默认为gzip(Use Hadoop codec default gzip)</td>
</tr>
<tr>
<td align="center">19</td>
<td align="center">–null-string &lt;null-string&gt;</td>
<td align="center">string类型的列如果null，替换为指定字符串</td>
</tr>
<tr>
<td align="center">20</td>
<td align="center">–null-non-string &lt;null-string&gt;</td>
<td align="center">非string类型的列如果null，替换为指定字符串</td>
</tr>
<tr>
<td align="center">21</td>
<td align="center">–check-column &lt;col&gt;</td>
<td align="center">作为增量导入判断的列名</td>
</tr>
<tr>
<td align="center">22</td>
<td align="center">–incremental &lt;mode&gt;</td>
<td align="center">mode：append或lastmodified</td>
</tr>
<tr>
<td align="center">23</td>
<td align="center">–last-value &lt;value&gt;</td>
<td align="center">指定某一个值，用于标记增量导入的位置</td>
</tr>
</tbody></table>
<h4 id="6-命令-amp-参数：export"><a href="#6-命令-amp-参数：export" class="headerlink" title="6.命令&amp;参数：export"></a>6.命令&amp;参数：export</h4><p>从HDFS（包括Hive和HBase）中将数据导出到关系型数据库中。</p>
<h5 id="1-命令：-1"><a href="#1-命令：-1" class="headerlink" title="(1).命令："></a>(1).命令：</h5><p>如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop export \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/Movle \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--export-dir /user/hive/warehouse/student_hive \</span><br><span class="line">--table adc \</span><br><span class="line">--num-mappers 1 \</span><br><span class="line">--input-fields-terminated-by &quot;\t&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTMyMTY2ODc3OTFiZDIyOTYucG5n?x-oss-process=image/format,png" alt="导出命令"></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTQzM2EwZjE3ZDkzYmY3YjYucG5n?x-oss-process=image/format,png" alt="hive表"></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWRjN2FlN2MyYjg2MDU3YWIucG5n?x-oss-process=image/format,png" alt="导出前mysql表"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTcyMzNhMmZjMzM1MDA4N2YucG5n?x-oss-process=image/format,png" alt="导出后mysql表"></p>
<h5 id="2-参数：-1"><a href="#2-参数：-1" class="headerlink" title="(2). 参数："></a>(2). 参数：</h5><table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">–direct</td>
<td align="center">利用数据库自带的导入导出工具，以便于提高效率</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">–export-dir &lt;dir&gt;</td>
<td align="center">存放数据的HDFS的源目录</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">-m或–num-mappers &lt;n&gt;</td>
<td align="center">启动N个map来并行导入数据，默认4个</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">–table &lt;table-name&gt;</td>
<td align="center">指定导出到哪个RDBMS中的表</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">–update-key &lt;col-name&gt;</td>
<td align="center">对某一列的字段进行更新操作</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">–update-mode &lt;mode&gt;</td>
<td align="center">updateonly allowinsert(默认)</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">–input-null-string &lt;null-string&gt;</td>
<td align="center">请参考import该类似参数说明</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">–input-null-non-string &lt;null-string&gt;</td>
<td align="center">请参考import该类似参数说明</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">–staging-table &lt;staging-table-name&gt;</td>
<td align="center">创建一张临时表，用于存放所有事务的结果，然后将所有事务结果一次性导入到目标表中，防止错误</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">–clear-staging-table</td>
<td align="center">如果第9个参数非空，则可以在导出操作执行前，清空临时事务结果表</td>
</tr>
</tbody></table>
<h4 id="7-命令-amp-参数：codegen"><a href="#7-命令-amp-参数：codegen" class="headerlink" title="7.命令&amp;参数：codegen"></a>7.命令&amp;参数：codegen</h4><p>将关系型数据库中的表映射为一个Java类，在该类中有各列对应的各个字段。</p>
<p>如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop codegen \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/company \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--table staff \</span><br><span class="line">--bindir /opt/desktop/staff \</span><br><span class="line">--class-name staff \</span><br><span class="line">--fields-terminated-by &quot;\t&quot;</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTE4ZThkOTJmZDZlMGQyYmQucG5n?x-oss-process=image/format,png"></p>
<table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">–bindir &lt;dir&gt;</td>
<td align="center">指定生成的Java文件、编译成的class文件及将生成文件打包为jar的文件输出路径</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">–class-name &lt;name&gt;</td>
<td align="center">设定生成的Java文件指定的名称</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">–outdir &lt;dir&gt;</td>
<td align="center">生成Java文件存放的路径</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">–package-name &lt;name&gt;</td>
<td align="center">包名，如com.z，就会生成com和z两级目录</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">–input-null-non-string &lt;null-str&gt;</td>
<td align="center">在生成的Java文件中，可以将null字符串或者不存在的字符串设置为想要设定的值（例如空字符串）</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">–input-null-string &lt;null-str&gt;</td>
<td align="center">将null字符串替换成想要替换的值(一般与5同时使用)</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">–map-column-java &lt;arg&gt;</td>
<td align="center">数据库字段在生成的Java文件中会映射成各种属性，且默认的数据类型与数据库类型保持对应关系。该参数可以改变默认类型，例如：–map-column-java id=long, name=String</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">–null-non-string &lt;null-str&gt;</td>
<td align="center">在生成Java文件时，可以将不存在或者null的字符串设置为其他值</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">–null-string &lt;null-str&gt;</td>
<td align="center">在生成Java文件时，将null字符串设置为其他值(一般与8同时使用)</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">–table &lt;table-name&gt;</td>
<td align="center">对应关系数据库中的表名，生成的Java文件中的各个属性与该表的各个字段一一对应</td>
</tr>
</tbody></table>
<h4 id="8-命令-amp-参数：create-hive-table"><a href="#8-命令-amp-参数：create-hive-table" class="headerlink" title="8.命令&amp;参数：create-hive-table"></a>8.命令&amp;参数：create-hive-table</h4><p>生成与关系数据库表结构对应的hive表结构。</p>
<h5 id="1-命令：-2"><a href="#1-命令：-2" class="headerlink" title="(1)命令："></a>(1)命令：</h5><p>如：仅建表</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop create-hive-table \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/company \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--table staff \</span><br><span class="line">--hive-table hive_staff1</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWM5MzFjNTQyMTkzY2FhYjcucG5n?x-oss-process=image/format,png" alt="建表命令"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWRkN2M4ODViYTIwMmU5OGEucG5n?x-oss-process=image/format,png" alt="结果"></p>
<h5 id="2-参数：-2"><a href="#2-参数：-2" class="headerlink" title="(2)参数："></a>(2)参数：</h5><table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">–hive-home &lt;dir&gt;</td>
<td align="center">Hive的安装目录，可以通过该参数覆盖掉默认的Hive目录</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">–hive-overwrite</td>
<td align="center">覆盖掉在Hive表中已经存在的数据</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">–create-hive-table</td>
<td align="center">默认是false，如果目标表已经存在了，那么创建任务会失败</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">–hive-table</td>
<td align="center">后面接要创建的hive表</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">–table</td>
<td align="center">指定关系数据库的表名</td>
</tr>
</tbody></table>
<h4 id="9-命令-amp-参数：eval"><a href="#9-命令-amp-参数：eval" class="headerlink" title="9.命令&amp;参数：eval"></a>9.命令&amp;参数：eval</h4><p>可以快速的使用SQL语句对关系型数据库进行操作，经常用于在import数据之前，了解一下SQL语句是否正确，数据是否正常，并可以将结果显示在控制台。</p>
<h5 id="1-命令：-3"><a href="#1-命令：-3" class="headerlink" title="(1)命令："></a>(1)命令：</h5><p>如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop eval \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/company \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--query &quot;SELECT * FROM staff&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTE1ZDg0NmNjMzRhZGRkNGUucG5n?x-oss-process=image/format,png" alt="结果"></p>
<p>(2)参数：</p>
<table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">–query或–e</td>
<td align="center">后跟查询的SQL语句</td>
</tr>
</tbody></table>
<h4 id="10-命令-amp-参数：import-all-tables"><a href="#10-命令-amp-参数：import-all-tables" class="headerlink" title="10.命令&amp;参数：import-all-tables"></a>10.命令&amp;参数：import-all-tables</h4><p>可以将RDBMS中的所有表导入到HDFS中，每一个表都对应一个HDFS目录</p>
<h5 id="1-命令：-4"><a href="#1-命令：-4" class="headerlink" title="(1)命令："></a>(1)命令：</h5><p>如：注意：(卡住)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop import-all-tables \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/company \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--hive-import \</span><br><span class="line">--fields-terminated-by &quot;\t&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop-import-all-tables \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/company \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--hive-import \</span><br><span class="line">--warehouse-dir /all_tables</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTU4OTIxM2Y1NTFlYTEzZTAucG5n?x-oss-process=image/format,png" alt="company数据库中的所有表"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWM1ZTY3OWY1MzVmMDFkYTUucG5n?x-oss-process=image/format,png" alt="结果1"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWQyZDA2Yzg4MzNiYjRlNWIucG5n?x-oss-process=image/format,png" alt="结果2"></p>
<h5 id="2-参数：-3"><a href="#2-参数：-3" class="headerlink" title="(2)参数："></a>(2)参数：</h5><table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">–as-avrodatafile</td>
<td align="center">这些参数的含义均和import对应的含义一致</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">–as-sequencefile</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">–as-textfile</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">–direct</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">–direct-split-size &lt;n&gt;</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">–inline-lob-limit &lt;n&gt;</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">–m或–num-mappers &lt;n&gt;</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">–warehouse-dir &lt;dir&gt;</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">-z或–compress</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">–compression-codec</td>
<td align="center"></td>
</tr>
</tbody></table>
<h4 id="11-命令-amp-参数：job"><a href="#11-命令-amp-参数：job" class="headerlink" title="11.命令&amp;参数：job"></a>11.命令&amp;参数：job</h4><p>用来生成一个sqoop任务，生成后不会立即执行，需要手动执行。</p>
<h5 id="1-命令：-5"><a href="#1-命令：-5" class="headerlink" title="(1)命令："></a>(1)命令：</h5><p>如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop job \</span><br><span class="line"> --create myjob -- import-all-tables \</span><br><span class="line"> --connect jdbc:mysql://hadoop1:3306/company \</span><br><span class="line"> --username root \</span><br><span class="line"> --password 000000</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop job \</span><br><span class="line">--list</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTk4OWJmODJjMmFhZjk3M2UucG5n?x-oss-process=image/format,png"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop job \</span><br><span class="line">--exec myjob</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWYzNzQ2ZGI0OWZmYTk4NjgucG5n?x-oss-process=image/format,png"></p>
<p>提示：注意import-all-tables和它左边的–之间有一个空格</p>
<p>提示：如果需要连接metastore，则–meta-connect</p>
<p>执行的结果在HDFS：/user/root/ 目录中，即导出所有表到/user/root中</p>
<h5 id="2-参数：-4"><a href="#2-参数：-4" class="headerlink" title="(2)参数："></a>(2)参数：</h5><table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">–create &lt;job-id&gt;</td>
<td align="center">创建job参数</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">–delete &lt;job-id&gt;</td>
<td align="center">删除一个job</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">–exec &lt;job-id&gt;</td>
<td align="center">执行一个job</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">–help</td>
<td align="center">显示job帮助</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">–list</td>
<td align="center">显示job列表</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">–meta-connect &lt;jdbc-uri&gt;</td>
<td align="center">用来连接metastore服务</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">–show &lt;job-id&gt;</td>
<td align="center">显示一个job的信息</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">–verbose</td>
<td align="center">打印命令运行时的详细信息</td>
</tr>
</tbody></table>
<p>尖叫提示：在执行一个job时，如果需要手动输入数据库密码，可以做如下优化</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>sqoop.metastore.client.record.password<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">description</span>&gt;</span>If true, allow saved passwords in the metastore.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="12-命令-amp-参数：list-databases"><a href="#12-命令-amp-参数：list-databases" class="headerlink" title="12.命令&amp;参数：list-databases"></a>12.命令&amp;参数：list-databases</h4><h5 id="1-命令：-6"><a href="#1-命令：-6" class="headerlink" title="(1)命令："></a>(1)命令：</h5><p>如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop list-databases \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/ \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTUwNjhiYjM0ZDExZTQyYjQucG5n?x-oss-process=image/format,png"></p>
<h5 id="2-参数：与公用参数一样"><a href="#2-参数：与公用参数一样" class="headerlink" title="(2)参数：与公用参数一样"></a>(2)参数：与公用参数一样</h5><h4 id="13-命令-amp-参数：list-tables"><a href="#13-命令-amp-参数：list-tables" class="headerlink" title="13.命令&amp;参数：list-tables"></a>13.命令&amp;参数：list-tables</h4><h5 id="1-命令：-7"><a href="#1-命令：-7" class="headerlink" title="(1)命令："></a>(1)命令：</h5><p>如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop list-tables \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/company \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWI4NDRkNDY2NjY0MTRkN2UucG5n?x-oss-process=image/format,png"></p>
<h5 id="2-参数-与公用参数一样"><a href="#2-参数-与公用参数一样" class="headerlink" title="(2)参数:与公用参数一样"></a>(2)参数:与公用参数一样</h5><h4 id="14-命令-amp-参数：merge"><a href="#14-命令-amp-参数：merge" class="headerlink" title="14.命令&amp;参数：merge"></a>14.命令&amp;参数：merge</h4><p>将HDFS中不同目录下面的数据合并在一起并放入指定目录中</p>
<p>数据环境：注意:以下数据自己手动改成\t</p>
<p>new_staff</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1     AAA male</span><br><span class="line">2     BBB male</span><br><span class="line">3     CCC male</span><br><span class="line">4     DDD male</span><br></pre></td></tr></table></figure>

<p>old_staff</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1     AAA female</span><br><span class="line">2     CCC female</span><br><span class="line">3     BBB female</span><br><span class="line">6     DDD female</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTcwZTNiMjBlMTdkY2ZlZjQucG5n?x-oss-process=image/format,png" alt="HDFS上的文件"></p>
<p>提示：上边数据的列之间的分隔符应该为\t，行与行之间的分割符为\n，如果直接复制，请检查之。</p>
<p>(1)命令：</p>
<p>如：</p>
<p>创建JavaBean：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop codegen \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/company \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--table staff \</span><br><span class="line">--bindir /opt/Desktop/staff \</span><br><span class="line">--class-name Staff \</span><br><span class="line">--fields-terminated-by &quot;\t&quot;</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTc4MmFhMTAxMjg0MjIxMTAucG5n?x-oss-process=image/format,png"></p>
<p>开始合并：注：是hdfs路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop merge \</span><br><span class="line">--new-data /test/new/ \</span><br><span class="line">--onto /test/old/ \</span><br><span class="line">--target-dir /test/merged1 \</span><br><span class="line">--jar-file /opt/Desktop/staff/Staff.jar \</span><br><span class="line">--class-name Staff \</span><br><span class="line">--merge-key id</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWIwODYzOGNiMWUwYWQ1YmUucG5n?x-oss-process=image/format,png" alt="命令"><br>结果：<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWQ2ZDEwMTQ0MDhjMDI3MGUucG5n?x-oss-process=image/format,png" alt="结果"></p>
<h5 id="2-参数：-5"><a href="#2-参数：-5" class="headerlink" title="(2)参数："></a>(2)参数：</h5><table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">–new-data &lt;path&gt;</td>
<td align="center">HDFS 待合并的数据目录，合并后在新的数据集中保留</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">–onto &lt;path&gt;</td>
<td align="center">HDFS合并后，重复的部分在新的数据集中被覆盖</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">–merge-key &lt;col&gt;</td>
<td align="center">合并键，一般是主键ID</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">–jar-file &lt;file&gt;</td>
<td align="center">合并时引入的jar包，该jar包是通过Codegen工具生成的jar包</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">–class-name &lt;class&gt;</td>
<td align="center">对应的表名或对象名，该class类是包含在jar包中的</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">–target-dir &lt;path&gt;</td>
<td align="center">合并后的数据在HDFS里存放的目录</td>
</tr>
</tbody></table>
<h4 id="15-命令-amp-参数：metastore"><a href="#15-命令-amp-参数：metastore" class="headerlink" title="15.命令&amp;参数：metastore"></a>15.命令&amp;参数：metastore</h4><p>记录了Sqoop job的元数据信息，如果不启动该服务，那么默认job元数据的存储目录为~/.sqoop，可在sqoop-site.xml中修改。</p>
<h5 id="1-命令：-8"><a href="#1-命令：-8" class="headerlink" title="(1)命令："></a>(1)命令：</h5><p>如：启动sqoop的metastore服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop metastore</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWUxMTQ1NjMyNzc0YzM5MWIucG5n?x-oss-process=image/format,png" alt="image.png"><br>(2)参数：</p>
<table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">–shutdown</td>
<td align="center">关闭metastore</td>
</tr>
</tbody></table>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sqoop/" rel="tag">Sqoop</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-VMware 搭建CentOS7"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/09/VMware%20%E6%90%AD%E5%BB%BACentOS7/"
    >VMware 搭建CentOS7</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/05/09/VMware%20%E6%90%AD%E5%BB%BACentOS7/" class="article-date">
  <time datetime="2019-05-09T07:00:00.000Z" itemprop="datePublished">2019-05-09</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="1-文件-gt-新建虚拟机"><a href="#1-文件-gt-新建虚拟机" class="headerlink" title="1.文件-&gt;新建虚拟机"></a>1.文件-&gt;新建虚拟机</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTQ3ZTNjZTg5YWM0MGVhMGYucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="2-选择自定义，点击下一步"><a href="#2-选择自定义，点击下一步" class="headerlink" title="2.选择自定义，点击下一步"></a>2.选择自定义，点击下一步</h4><h4 id="3-点击下一步"><a href="#3-点击下一步" class="headerlink" title="3.点击下一步"></a>3.点击下一步</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTA0YWZiYmVhN2JjNjBmOWEucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="4-点击“稍后安装操作系统”，点击下一步"><a href="#4-点击“稍后安装操作系统”，点击下一步" class="headerlink" title="4.点击“稍后安装操作系统”，点击下一步"></a>4.点击“稍后安装操作系统”，点击下一步</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTZmN2I1MmEyYzE2MTIzMjEucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="5-选择“Linux-L-”-版本选择”CentOS-7-64位“，点击下一步"><a href="#5-选择“Linux-L-”-版本选择”CentOS-7-64位“，点击下一步" class="headerlink" title="5.选择“Linux(L)”,版本选择”CentOS 7 64位“，点击下一步"></a>5.选择“Linux(L)”,版本选择”CentOS 7 64位“，点击下一步</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTU5ODJjMDgyZDI2MDI2MzUucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="6-虚拟机名称填自己所想要命名的名字，位置最好不要放在c盘，点击下一步"><a href="#6-虚拟机名称填自己所想要命名的名字，位置最好不要放在c盘，点击下一步" class="headerlink" title="6.虚拟机名称填自己所想要命名的名字，位置最好不要放在c盘，点击下一步"></a>6.虚拟机名称填自己所想要命名的名字，位置最好不要放在c盘，点击下一步</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTk3ZmU5NDFkM2E4ZjY5NmUucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="7-点击下一步-按需求调整参数"><a href="#7-点击下一步-按需求调整参数" class="headerlink" title="7.点击下一步(按需求调整参数)"></a>7.点击下一步(按需求调整参数)</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTllZjllYmUzNjc4NDFkZWYucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="8-点击下一步-按需求调整参数"><a href="#8-点击下一步-按需求调整参数" class="headerlink" title="8.点击下一步(按需求调整参数)"></a>8.点击下一步(按需求调整参数)</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWI3ZThjOGQ1MmU2ZmEyMWQucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="9-选择“使用网络地址转换-NAT-”，点击下一步"><a href="#9-选择“使用网络地址转换-NAT-”，点击下一步" class="headerlink" title="9.选择“使用网络地址转换(NAT)”，点击下一步"></a>9.选择“使用网络地址转换(NAT)”，点击下一步</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWM3YWNkZjY2NjY3MzM3N2MucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="10-选择“LSI-Logic-L-”，点击下一步"><a href="#10-选择“LSI-Logic-L-”，点击下一步" class="headerlink" title="10.选择“LSI Logic(L)”，点击下一步"></a>10.选择“LSI Logic(L)”，点击下一步</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTBiMDBlN2ZkZjY2ODlmNWEucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="11-选择“SCSI-S-”，点击下一步"><a href="#11-选择“SCSI-S-”，点击下一步" class="headerlink" title="11.选择“SCSI(S)”，点击下一步"></a>11.选择“SCSI(S)”，点击下一步</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWVhM2YyNzU4YTFlOTNlYTkucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="12-选择“创建新虚拟磁盘-V-”，点击下一步"><a href="#12-选择“创建新虚拟磁盘-V-”，点击下一步" class="headerlink" title="12.选择“创建新虚拟磁盘(V)”，点击下一步"></a>12.选择“创建新虚拟磁盘(V)”，点击下一步</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTM3NDIwOTQ0Mzg5Zjk1ZWQucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="13-“最大磁盘大小”视需求而定，选择“将虚拟磁盘拆分成多个文件-M-”-点击下一步"><a href="#13-“最大磁盘大小”视需求而定，选择“将虚拟磁盘拆分成多个文件-M-”-点击下一步" class="headerlink" title="13.“最大磁盘大小”视需求而定，选择“将虚拟磁盘拆分成多个文件(M)”,点击下一步"></a>13.“最大磁盘大小”视需求而定，选择“将虚拟磁盘拆分成多个文件(M)”,点击下一步</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWUwMDhjZDI0ZWIyOGNhYmMucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="14-点击下一步"><a href="#14-点击下一步" class="headerlink" title="14.点击下一步"></a>14.点击下一步</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWY1MjFkNjZlMGY2MjA0ZTQucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="15-点击“完成”"><a href="#15-点击“完成”" class="headerlink" title="15.点击“完成”"></a>15.点击“完成”</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTFhNzY4YzQzZjQwZDBlMWUucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="16-双击“CD-DVD-IDE-“"><a href="#16-双击“CD-DVD-IDE-“" class="headerlink" title="16.双击“CD/DVD(IDE)“"></a>16.双击“CD/DVD(IDE)“</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWZmOWZlMjFmNmI5YzhjMDAucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="17-选择“使用ISO镜像文件”，选择CentOS7-所在的文件地址，点击确定"><a href="#17-选择“使用ISO镜像文件”，选择CentOS7-所在的文件地址，点击确定" class="headerlink" title="17.选择“使用ISO镜像文件”，选择CentOS7 所在的文件地址，点击确定"></a>17.选择“使用ISO镜像文件”，选择CentOS7 所在的文件地址，点击确定</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTRlMzQyOWJjMzY4ZmI5YTAucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="18-点击“开启次虚拟机”"><a href="#18-点击“开启次虚拟机”" class="headerlink" title="18.点击“开启次虚拟机”"></a>18.点击“开启次虚拟机”</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTQ4OTNhMzMwNTcyYjAwYjYucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="19-选择“install-CentOS7”"><a href="#19-选择“install-CentOS7”" class="headerlink" title="19.选择“install CentOS7”"></a>19.选择“install CentOS7”</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LThlZTFjMWE0NWFmZDUwZjUucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="20-选择“中文，简体中文（中国）”，点击继续"><a href="#20-选择“中文，简体中文（中国）”，点击继续" class="headerlink" title="20.选择“中文，简体中文（中国）”，点击继续"></a>20.选择“中文，简体中文（中国）”，点击继续</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTZiZDVhNDdiYWFmNWVhYWIucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="21-时间和日期，选择“亚洲-上海”，键盘设置，语言支持如下图"><a href="#21-时间和日期，选择“亚洲-上海”，键盘设置，语言支持如下图" class="headerlink" title="21.时间和日期，选择“亚洲/上海”，键盘设置，语言支持如下图"></a>21.时间和日期，选择“亚洲/上海”，键盘设置，语言支持如下图</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWZhYzk1ZWE4NWFhMjg2MDYucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="22-”安装源“选择“本地介质”，“软件选择”选择“带GUI的服务器”，“KDUMP”选择禁用"><a href="#22-”安装源“选择“本地介质”，“软件选择”选择“带GUI的服务器”，“KDUMP”选择禁用" class="headerlink" title="22.”安装源“选择“本地介质”，“软件选择”选择“带GUI的服务器”，“KDUMP”选择禁用"></a>22.”安装源“选择“本地介质”，“软件选择”选择“带GUI的服务器”，“KDUMP”选择禁用</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTA0ZWQ5NTcxNjg1ZGY2YmQucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="23-网络和主机名，“开启以太网”，主机名改为自己想用的名字，点击配置"><a href="#23-网络和主机名，“开启以太网”，主机名改为自己想用的名字，点击配置" class="headerlink" title="23.网络和主机名，“开启以太网”，主机名改为自己想用的名字，点击配置"></a>23.网络和主机名，“开启以太网”，主机名改为自己想用的名字，点击配置</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTczODBhZTMzYjk3Y2E0OGYucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="24-选择“常规”，勾上“可用时自动链接到这个网络”，点击保存”"><a href="#24-选择“常规”，勾上“可用时自动链接到这个网络”，点击保存”" class="headerlink" title="24.选择“常规”，勾上“可用时自动链接到这个网络”，点击保存”"></a>24.选择“常规”，勾上“可用时自动链接到这个网络”，点击保存”</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTQ0MmM4ZDIzNGRjZTM5OGMucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="25-点击完成"><a href="#25-点击完成" class="headerlink" title="25.点击完成"></a>25.点击完成</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWQ0NzJhYTM0NTY3MWYzZjkucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="26-点击开始安装"><a href="#26-点击开始安装" class="headerlink" title="26.点击开始安装"></a>26.点击开始安装</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWM0ZmJkZDU3YmVjYzQyOTAucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="27-点击“root密码”"><a href="#27-点击“root密码”" class="headerlink" title="27.点击“root密码”"></a>27.点击“root密码”</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTk0Njg5ZGM3ZGVhNzhhNzYucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="28-输入“root密码”，点击完成"><a href="#28-输入“root密码”，点击完成" class="headerlink" title="28.输入“root密码”，点击完成"></a>28.输入“root密码”，点击完成</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWMxNTRkNzYwY2Q0YmU0MjUucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="29-等待安装"><a href="#29-等待安装" class="headerlink" title="29.等待安装"></a>29.等待安装</h4><h4 id="30-“Initial-setup-of-CentOS-linux-7-Core-”"><a href="#30-“Initial-setup-of-CentOS-linux-7-Core-”" class="headerlink" title="30.“Initial setup of CentOS linux 7(Core)”,"></a>30.“Initial setup of CentOS linux 7(Core)”,</h4><p>输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure>
<p>输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>
<p>输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">q</span><br></pre></td></tr></table></figure>
<p>输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yes</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWVkYzAyM2Y3OWQ1MjZhZjkucG5n?x-oss-process=image/format,png" alt="image.png"></p>
<h4 id="31-进入linux设置页面，一步步设置即可"><a href="#31-进入linux设置页面，一步步设置即可" class="headerlink" title="31.进入linux设置页面，一步步设置即可"></a>31.进入linux设置页面，一步步设置即可</h4> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS/" rel="tag">CentOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VMware/" rel="tag">VMware</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Sqoop简单使用案例"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/09/Sqoop%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/"
    >Sqoop简单使用案例</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/05/09/Sqoop%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/" class="article-date">
  <time datetime="2019-05-09T05:00:00.000Z" itemprop="datePublished">2019-05-09</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Sqoop/">Sqoop</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="一-导入数据"><a href="#一-导入数据" class="headerlink" title="一.导入数据"></a>一.导入数据</h3><p>在Sqoop中，“导入”概念指：从非大数据集群(RDBMS)向大数据集群(HDFS，HIVE，HBASE)中传输数据，叫做：导入，即使用import关键字。</p>
<h4 id="1-RDBMS到HDFS"><a href="#1-RDBMS到HDFS" class="headerlink" title="1.RDBMS到HDFS"></a>1.RDBMS到HDFS</h4><h5 id="1-确定Mysql服务开启正常"><a href="#1-确定Mysql服务开启正常" class="headerlink" title="(1).确定Mysql服务开启正常"></a>(1).确定Mysql服务开启正常</h5><h5 id="2-在Mysql中新建一张表并插入一些数据"><a href="#2-在Mysql中新建一张表并插入一些数据" class="headerlink" title="(2).在Mysql中新建一张表并插入一些数据"></a>(2).在Mysql中新建一张表并插入一些数据</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mysql -uroot -p000000</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> create database company;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> create table company.staff(id int(4) primary key not null auto_increment, name varchar(255), sex varchar(255));</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> insert into company.staff(name, sex) values(<span class="string">&#x27;Thomas&#x27;</span>, <span class="string">&#x27;Male&#x27;</span>);</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> insert into company.staff(name, sex) values(<span class="string">&#x27;Catalina&#x27;</span>, <span class="string">&#x27;FeMale&#x27;</span>);</span></span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTZiYTE2OWNlNjNlMDc1ZjcucG5n?x-oss-process=image/format,png"></p>
<h5 id="3-导入数据"><a href="#3-导入数据" class="headerlink" title="(3).导入数据"></a>(3).导入数据</h5><h6 id="a-全部导入"><a href="#a-全部导入" class="headerlink" title="(a)全部导入"></a>(a)全部导入</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop import \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/company \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--table staff \</span><br><span class="line">--target-dir /user/company \</span><br><span class="line">--delete-target-dir \</span><br><span class="line">--num-mappers 1 \</span><br><span class="line">--fields-terminated-by &quot;\t&quot;</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTZkYTY4MmMxYmVkMDQ1MDkucG5n?x-oss-process=image/format,png" alt="导入命令"></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTE1Yjg4OWEzNmNlODEwZGYucG5n?x-oss-process=image/format,png" alt="结果"></p>
<h6 id="b-查询导入"><a href="#b-查询导入" class="headerlink" title="(b)查询导入"></a>(b)查询导入</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop import \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/company \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--target-dir /user/company \</span><br><span class="line">--delete-target-dir \</span><br><span class="line">--num-mappers 1 \</span><br><span class="line">--fields-terminated-by &quot;\t&quot; \</span><br><span class="line">--query &#x27;select name,sex from staff where id &lt;=3 and $CONDITIONS;&#x27;</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTNiZTY5MDhiYTg0M2ZmZjMucG5n?x-oss-process=image/format,png" alt="查询导入命令"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTEzMmMyYWZjZDk1MjVlYTgucG5n?x-oss-process=image/format,png" alt="结果"></p>
<p><strong>提示</strong>：must contain ‘$CONDITIONS’ in WHERE clause.<br>注：CONDITIONS 翻译‘条件’</p>
<p><strong>提示</strong>：如果query后使用的是双引号，则$CONDITIONS前必须加转移符，防止shell识别为自己的变量。</p>
<h6 id="c-导入指定列"><a href="#c-导入指定列" class="headerlink" title="(c )导入指定列"></a>(c )导入指定列</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop import \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/company \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--target-dir /user/company \</span><br><span class="line">--delete-target-dir \</span><br><span class="line">--num-mappers 1 \</span><br><span class="line">--fields-terminated-by &quot;\t&quot; \</span><br><span class="line">--columns id,name \</span><br><span class="line">--table staff</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTNjYjhmY2Y2ZjgzN2FkYWIucG5n?x-oss-process=image/format,png" alt="导入命令"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTE2MzBiM2Y0Yzg5NzZlOTgucG5n?x-oss-process=image/format,png" alt="结果"></p>
<p><strong>提示</strong>：columns中如果涉及到多列，用逗号分隔，分隔时不要添加空格</p>
<h6 id="d-使用sqoop关键字筛选查询导入数据"><a href="#d-使用sqoop关键字筛选查询导入数据" class="headerlink" title="(d)使用sqoop关键字筛选查询导入数据"></a>(d)使用sqoop关键字筛选查询导入数据</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop import \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/company \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--target-dir /user/company \</span><br><span class="line">--delete-target-dir \</span><br><span class="line">--num-mappers 1 \</span><br><span class="line">--fields-terminated-by &quot;\t&quot; \</span><br><span class="line">--table staff \</span><br><span class="line">--where &quot;id=2&quot;</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTAyMTk0N2QxNzdhYzAyMWUucG5n?x-oss-process=image/format,png" alt="导入命令"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTcxMDg1MTk0NmRmNGI4ZDUucG5n?x-oss-process=image/format,png" alt="结果"></p>
<p><strong>提示</strong>：在Sqoop中可以使用sqoop import -D property.name=property.value这样的方式加入执行任务的参数，多个参数用空格隔开。</p>
<h4 id="2-、RDBMS到Hive"><a href="#2-、RDBMS到Hive" class="headerlink" title="2.、RDBMS到Hive"></a>2.、RDBMS到Hive</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> bin/sqoop import \</span></span><br><span class="line"><span class="bash">--connect jdbc:mysql://hadoop1:3306/Movle \</span></span><br><span class="line"><span class="bash">--username root \</span></span><br><span class="line"><span class="bash">--password 000000 \</span></span><br><span class="line"><span class="bash">--table aca \</span></span><br><span class="line"><span class="bash">--delete-target-dir \</span></span><br><span class="line"><span class="bash">--num-mappers 1 \</span></span><br><span class="line"><span class="bash">--hive-import \</span></span><br><span class="line"><span class="bash">--fields-terminated-by <span class="string">&quot;\t&quot;</span> \</span></span><br><span class="line"><span class="bash">--hive-overwrite \</span></span><br><span class="line"><span class="bash">--hive-table student_hive</span></span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWQyNjk1ODQ1YmM4ZmUxNDMucG5n?x-oss-process=image/format,png" alt="mysql数据库中表的内容"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTJhMzRkN2RlMjU1ZTUwZDYucG5n?x-oss-process=image/format,png" alt="导入命令"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTY0ODBjMTY4YTZkZjFkYmUucG5n?x-oss-process=image/format,png" alt="结果"></p>
<p><strong>提示</strong>：该过程分为两步，第一步将数据导入到HDFS，第二步将导入到HDFS的数据迁移到Hive仓库</p>
<p>尖叫提示：从MYSQL到Hive，本质时从MYSQL =&gt; HDFS =&gt; load To Hive</p>
<h3 id="二-导出数据"><a href="#二-导出数据" class="headerlink" title="二.导出数据"></a>二.导出数据</h3><p>在Sqoop中，“导出”概念指：从大数据集群(HDFS，HIVE，HBASE)向非大数据集群(RDBMS)中传输数据，叫做：导出，即使用export关键字。</p>
<h4 id="1-HIVE-HDFS到RDBMS"><a href="#1-HIVE-HDFS到RDBMS" class="headerlink" title="1.HIVE/HDFS到RDBMS"></a>1.HIVE/HDFS到RDBMS</h4><h5 id="1-创建adc表"><a href="#1-创建adc表" class="headerlink" title="(1)创建adc表"></a>(1)创建adc表</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table Movle.adc(id int,name VARCHAR(10));</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWIzNjk3NzcyZjM1YmVlZTMucG5n?x-oss-process=image/format,png" alt="创建mysql 表adc"></p>
<h5 id="2-导入"><a href="#2-导入" class="headerlink" title="(2)导入"></a>(2)导入</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop export \</span><br><span class="line">--connect jdbc:mysql://hadoop1:3306/Movle \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--export-dir /user/hive/warehouse/student_hive \</span><br><span class="line">--table adc \</span><br><span class="line">--num-mappers 1 \</span><br><span class="line">--input-fields-terminated-by &quot;\t&quot;</span><br></pre></td></tr></table></figure>



<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTdiYWJlNmNlZDc0YzhiZWUucG5n?x-oss-process=image/format,png" alt="导入命令"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWMwY2FiNDRjN2EyZjk0MjgucG5n?x-oss-process=image/format,png" alt="Hive表中的数据"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWJhNTc5Y2JjMGI1N2VmNDUucG5n?x-oss-process=image/format,png" alt="导入后mysql中的数据"></p>
<p><strong>提示</strong>：Mysql中如果表不存在，不会自动创建,自行根据表结构创建</p>
<p><strong>提示</strong>：重复往mysql的统一个表中导出数据，mysql的表不能设置主键和自增。</p>
<p>尖叫提示：如果数据导出mysql中是“？？”那么添加characterEncoding=utf-8</p>
<p>思考：数据是覆盖还是追加 答案：追加</p>
<h3 id="三-脚本打包"><a href="#三-脚本打包" class="headerlink" title="三.脚本打包"></a>三.脚本打包</h3><p>使用opt格式的文件打包sqoop命令，然后执行</p>
<h4 id="1-创建一个-opt文件"><a href="#1-创建一个-opt文件" class="headerlink" title="1.创建一个.opt文件"></a>1.创建一个.opt文件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> touch job_HDFS2RDBMS.opt</span></span><br></pre></td></tr></table></figure>

<h4 id="2-编写sqoop脚本"><a href="#2-编写sqoop脚本" class="headerlink" title="2.编写sqoop脚本"></a>2.编写sqoop脚本</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vi ./job_HDFS2RDBMS.opt</span></span><br></pre></td></tr></table></figure>
<p>以下命令是从staff_hive中追加导入到mysql的aca表中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">export</span><br><span class="line">--connect</span><br><span class="line">jdbc:mysql://hadoop1:3306/Movle</span><br><span class="line">--username</span><br><span class="line">root</span><br><span class="line">--password</span><br><span class="line">000000</span><br><span class="line">--table</span><br><span class="line">adc</span><br><span class="line">--num-mappers</span><br><span class="line">1</span><br><span class="line">--export-dir</span><br><span class="line">/user/hive/warehouse/student_hive</span><br><span class="line">--input-fields-terminated-by</span><br><span class="line">&quot;\t&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWVjZThmMDFlZmUzZDdlOGEucG5n?x-oss-process=image/format,png" alt="job_HDFS2RDBMS.opt"></p>
<h4 id="3-执行该脚本"><a href="#3-执行该脚本" class="headerlink" title="3.执行该脚本"></a>3.执行该脚本</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> bin/sqoop --options-file job_HDFS2RDBMS.opt</span></span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTk4MDU5YWFmMWFjMDJkYTAucG5n?x-oss-process=image/format,png" alt="执行脚本"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWQ4OGVjYjJhMzUwMDJhMmIucG5n?x-oss-process=image/format,png" alt="执行前mysql表adc"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTAwZDM3MmY4YTY2ZDFmZDAucG5n?x-oss-process=image/format,png" alt="执行后mysql表adc"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sqoop/" rel="tag">Sqoop</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Sqoop安装配置"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/09/Sqoop%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"
    >Sqoop安装配置</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/05/09/Sqoop%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" class="article-date">
  <time datetime="2019-05-09T04:00:00.000Z" itemprop="datePublished">2019-05-09</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Sqoop/">Sqoop</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="0-前提"><a href="#0-前提" class="headerlink" title="0.前提"></a>0.前提</h4><p>安装Sqoop的前提是已经具备Java和Hadoop的环境。</p>
<h4 id="1-下载并解压"><a href="#1-下载并解压" class="headerlink" title="1.下载并解压"></a>1.下载并解压</h4><h5 id="1-最新版下载地址："><a href="#1-最新版下载地址：" class="headerlink" title="(1)最新版下载地址："></a>(1)最新版下载地址：</h5><p><a target="_blank" rel="noopener" href="http://mirrors.hust.edu.cn/apache/sqoop/1.4.6/">http://mirrors.hust.edu.cn/apache/sqoop/1.4.6/</a></p>
<h4 id="2-上传安装包sqoop-1-4-6-bin-hadoop-2-0-4-alpha-tar-gz到虚拟机中，如我的上传目录是：-opt-soft"><a href="#2-上传安装包sqoop-1-4-6-bin-hadoop-2-0-4-alpha-tar-gz到虚拟机中，如我的上传目录是：-opt-soft" class="headerlink" title="2. 上传安装包sqoop-1.4.6.bin__hadoop-2.0.4-alpha.tar.gz到虚拟机中，如我的上传目录是：/opt/soft/"></a>2. 上传安装包sqoop-1.4.6.bin__hadoop-2.0.4-alpha.tar.gz到虚拟机中，如我的上传目录是：/opt/soft/</h4><h4 id="3-解压sqoop安装包到指定目录，如："><a href="#3-解压sqoop安装包到指定目录，如：" class="headerlink" title="3.解压sqoop安装包到指定目录，如："></a>3.解压sqoop安装包到指定目录，如：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/soft</span><br><span class="line"></span><br><span class="line">tar -zxvf sqoop-1.4.6.bin__hadoop-2.0.4-alpha.tar.gz -C /opt/module/</span><br></pre></td></tr></table></figure>

<h4 id="4-修改配置文件"><a href="#4-修改配置文件" class="headerlink" title="4. 修改配置文件"></a>4. 修改配置文件</h4><p>Sqoop的配置文件与大多数大数据框架类似，在sqoop根目录下的conf目录中。</p>
<h5 id="1-重命名配置文件"><a href="#1-重命名配置文件" class="headerlink" title="(1).重命名配置文件"></a>(1).重命名配置文件</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mv sqoop-env-template.sh sqoop-env.sh</span><br><span class="line"></span><br><span class="line">mv sqoop-site-template.xml sqoop-site.xml     //此行不用做</span><br></pre></td></tr></table></figure>

<h5 id="2-修改配置文件"><a href="#2-修改配置文件" class="headerlink" title="(2).修改配置文件"></a>(2).修改配置文件</h5><p>sqoop-env.sh</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/module/sqoop-1.4.6.bin__hadoop-2.0.4-alpha/conf  </span><br><span class="line"></span><br><span class="line">vi sqoop-env.sh</span><br></pre></td></tr></table></figure>
<p>添加内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export HADOOP_COMMON_HOME=/opt/module/hadoop-2.8.4</span><br><span class="line"></span><br><span class="line">export HADOOP_MAPRED_HOME=/opt/module/hadoop-2.8.4</span><br><span class="line"></span><br><span class="line">export HIVE_HOME=/opt/module/hive-1.2.1 </span><br><span class="line"></span><br><span class="line">export ZOOKEEPER_HOME=/opt/module/zookeeper-3.4.10 </span><br><span class="line"></span><br><span class="line">export ZOOCFGDIR=/opt/module/zookeeper-3.4.10/conf</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTAxNjE5ODMzNGJlMjZmZmUucG5n?x-oss-process=image/format,png"></p>
<h4 id="5-拷贝JDBC驱动"><a href="#5-拷贝JDBC驱动" class="headerlink" title="5.拷贝JDBC驱动"></a>5.拷贝JDBC驱动</h4><p>拷贝jdbc驱动到sqoop的lib目录下，如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -a mysql-connector-java-5.1.27-bin.jar /opt/module/sqoop-1.4.6.bin__hadoop-2.0.4-alpha/lib</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWNlNjg3ZDVhODZmYThjMmMucG5n?x-oss-process=image/format,png"></p>
<h4 id="6-验证Sqoop"><a href="#6-验证Sqoop" class="headerlink" title="6. 验证Sqoop"></a>6. 验证Sqoop</h4><p>我们可以通过某一个command来验证sqoop配置是否正确：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> bin/sqoop <span class="built_in">help</span></span></span><br></pre></td></tr></table></figure>
<p>出现一些Warning警告（警告信息已省略），并伴随着帮助命令的输出：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTMxOTQ4NWJlNWQ5NjhhNGQucG5n?x-oss-process=image/format,png"></p>
<h4 id="7-测试Sqoop是否能够成功连接数据库"><a href="#7-测试Sqoop是否能够成功连接数据库" class="headerlink" title="7.测试Sqoop是否能够成功连接数据库"></a>7.测试Sqoop是否能够成功连接数据库</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop list-databases --connect jdbc:mysql://hadoop1:3306/ --username root --password 000000</span><br></pre></td></tr></table></figure>
<p>出现如下输出：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LWEzNDllODJmMmI5NTI0YjgucG5n?x-oss-process=image/format,png"></p>
<h4 id="8-注释配置文件"><a href="#8-注释配置文件" class="headerlink" title="8.注释配置文件"></a>8.注释配置文件</h4><p>注:注释掉configure-sqoop 134行到143行的内容，内容如下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/module/sqoop-1.4.6.bin__hadoop-2.0.4-alpha/bin </span><br><span class="line"></span><br><span class="line">vi configure-sqoop</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTUwODdlMWYxMWUwYjU4ZjMucG5n?x-oss-process=image/format,png"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">134 ## Moved to be a runtime check in sqoop.</span><br><span class="line"></span><br><span class="line">135 #if [ ! -d &quot;$&#123;HCAT_HOME&#125;&quot; ]; then</span><br><span class="line"></span><br><span class="line">136 #  echo &quot;Warning: $HCAT_HOME does not exist! HCatalog jobs will fail.&quot;</span><br><span class="line"></span><br><span class="line">137 #  echo &#x27;Please set $HCAT_HOME to the root of your HCatalog installation.&#x27;</span><br><span class="line"></span><br><span class="line">138 #Φ</span><br><span class="line"></span><br><span class="line">139 #</span><br><span class="line"></span><br><span class="line">140 #if [ ! -d &quot;$&#123;ACCUMULO_HOME&#125;&quot; ]; then</span><br><span class="line"></span><br><span class="line">141 #  echo &quot;Warning: $ACCUMULO_HOME does not exist! Accumulo imports will fail.&quot;</span><br><span class="line"></span><br><span class="line">142 #  echo &#x27;Please set $ACCUMULO_HOME to the root of your Accumulo installation.&#x27;</span><br><span class="line"></span><br><span class="line">143 #Φ</span><br></pre></td></tr></table></figure>

<p>注释前：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTUyMzkwZjFlN2ZlZDFhYjcucG5n?x-oss-process=image/format,png"></p>
<p>注释后：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTI1NjIzNTBkMDg3NWY0ZmQucG5n?x-oss-process=image/format,png"></p>
<p>验证：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop list-databases --connect jdbc:mysql://hadoop1:3306/ --username root --password 000000</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTcwMmY4NDdkNDc2M2VlNzcucG5n?x-oss-process=image/format,png"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sqoop/" rel="tag">Sqoop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/" rel="tag">安装部署</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Sqoop简介与原理"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/09/Sqoop%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%8E%9F%E7%90%86/"
    >Sqoop简介与原理</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/05/09/Sqoop%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%8E%9F%E7%90%86/" class="article-date">
  <time datetime="2019-05-09T03:00:00.000Z" itemprop="datePublished">2019-05-09</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Sqoop/">Sqoop</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="一-Sqoop简介"><a href="#一-Sqoop简介" class="headerlink" title="一.Sqoop简介"></a>一.Sqoop简介</h3><p>Apache Sqoop(TM)是一种旨在有效地在Apache Hadoop和诸如关系数据库等结构化数据存储之间传输大量数据的工具。</p>
<p>Sqoop于2012年3月孵化出来，现在是一个顶级的Apache项目。</p>
<p>请注意，1.99.7与1.4.6不兼容，且没有特征不完整，它并不打算用于生产部署。</p>
<h3 id="二-Sqoop原理"><a href="#二-Sqoop原理" class="headerlink" title="二.Sqoop原理"></a>二.Sqoop原理</h3><p>将导入或导出命令翻译成mapreduce程序来实现。</p>
<p>在翻译出的mapreduce中主要是对inputformat和outputformat进行定制。</p>
<h3 id="三-架构："><a href="#三-架构：" class="headerlink" title="三.架构："></a>三.架构：</h3><h4 id="1-区别"><a href="#1-区别" class="headerlink" title="1.区别"></a>1.区别</h4><p>(1)flume数据采集 采集日志数据<br>(2)sqoop数据迁移 hdfs-&gt;mysql<br>(3)azkaban任务调度 flume-&gt;hdfs-&gt;shell-&gt;hive-&gt;sql-&gt;BI</p>
<ul>
<li>sqoop数据迁移=mapreduce 处理离线数据 整个过程就是数据导入处理导出过程 直接使用map</li>
</ul>
<h4 id="2-sqoop作用："><a href="#2-sqoop作用：" class="headerlink" title="2.sqoop作用："></a>2.sqoop作用：</h4><ul>
<li>sqoop作用:简化开发</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sqoop/" rel="tag">Sqoop</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Linux 提示符&gt;怎样退出"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/07/Linux%20%E6%8F%90%E7%A4%BA%E7%AC%A6%3E%E6%80%8E%E6%A0%B7%E9%80%80%E5%87%BA/"
    >Linux 提示符&gt;怎样退出</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/05/07/Linux%20%E6%8F%90%E7%A4%BA%E7%AC%A6%3E%E6%80%8E%E6%A0%B7%E9%80%80%E5%87%BA/" class="article-date">
  <time datetime="2019-05-07T01:49:00.000Z" itemprop="datePublished">2019-05-07</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="1-情况："><a href="#1-情况：" class="headerlink" title="1.情况："></a>1.情况：</h4><p>在linux字符界面下，不小心输入了[，结果命令提示符变成了&gt;，然后在q、exit、ctrl+c、ctrl+z都回不去了，该如何解决？</p>
<h4 id="2-解决方法："><a href="#2-解决方法：" class="headerlink" title="2.解决方法："></a>2.解决方法：</h4><p>ctrl+c和ctrl+d都可以退出。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Linux安装Apache"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/06/Linux%E5%AE%89%E8%A3%85Apache/"
    >Linux安装Apache</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/05/06/Linux%E5%AE%89%E8%A3%85Apache/" class="article-date">
  <time datetime="2019-05-06T02:00:00.000Z" itemprop="datePublished">2019-05-06</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Apache/">Apache</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="一-安装Apache"><a href="#一-安装Apache" class="headerlink" title="一.安装Apache"></a>一.安装Apache</h3><h4 id="1-安装"><a href="#1-安装" class="headerlink" title="1.安装"></a>1.安装</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install httpd</span><br></pre></td></tr></table></figure>

<h4 id="2-启动："><a href="#2-启动：" class="headerlink" title="2.启动："></a>2.启动：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service httpd start</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTc5NjdkMTZhM2M1ZGE3YTIucG5n?x-oss-process=image/format,png" alt="启动"></p>
<h4 id="3-验证："><a href="#3-验证：" class="headerlink" title="3.验证："></a>3.验证：</h4><p>浏览器输入：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.125:80</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTY1YzY2ODE2MmM3ZjViYjMucG5n?x-oss-process=image/format,png"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Apache/" rel="tag">Apache</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/" rel="tag">安装部署</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Linux安装Tomcat"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/06/Linux%E5%AE%89%E8%A3%85Tomcat/"
    >Linux安装Tomcat</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/05/06/Linux%E5%AE%89%E8%A3%85Tomcat/" class="article-date">
  <time datetime="2019-05-06T01:49:00.000Z" itemprop="datePublished">2019-05-06</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tomcat/">Tomcat</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="一-安装Tomcat"><a href="#一-安装Tomcat" class="headerlink" title="一.安装Tomcat"></a>一.安装Tomcat</h3><h4 id="1-解压："><a href="#1-解压：" class="headerlink" title="1.解压："></a>1.解压：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf apache-tomcat-8.5.23.tar.gz -C /opt/module/</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LThmYmI4YTkwZmUzNWE1ZDEucG5n?x-oss-process=image/format,png" alt="解压"></p>
<h4 id="2-启动："><a href="#2-启动：" class="headerlink" title="2.启动："></a>2.启动：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/startup.sh</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTAxMDFhNjJiNDk2MTg4MTgucG5n?x-oss-process=image/format,png" alt="启动"></p>
<h4 id="3-验证："><a href="#3-验证：" class="headerlink" title="3.验证："></a>3.验证：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.125:8080</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy80MzkxNDA3LTBlY2ZlYzM0YTM4NGUxMTAucG5n?x-oss-process=image/format,png" alt="验证"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tomcat/" rel="tag">Tomcat</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/" rel="tag">安装部署</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-[LeetCode-面试02-05]链表求和"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/04/22/%5BLeetCode-%E9%9D%A2%E8%AF%9502-05%5D%E9%93%BE%E8%A1%A8%E6%B1%82%E5%92%8C/"
    >[LeetCode-面试02.05]链表求和</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/04/22/%5BLeetCode-%E9%9D%A2%E8%AF%9502-05%5D%E9%93%BE%E8%A1%A8%E6%B1%82%E5%92%8C/" class="article-date">
  <time datetime="2019-04-22T03:00:00.000Z" itemprop="datePublished">2019-04-22</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/LeetCode/">LeetCode</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="一-题目："><a href="#一-题目：" class="headerlink" title="一.题目："></a>一.题目：</h3><p>给定两个用链表表示的整数，每个节点包含一个数位。<br>这些数位是反向存放的，也就是个位排在链表首部。<br>编写函数对这两个整数求和，并用链表形式返回结果。</p>
<blockquote>
<p>示例：<br>输入：(7 -&gt; 1 -&gt; 6) + (5 -&gt; 9 -&gt; 2)，即617 + 295<br>输出：2 -&gt; 1 -&gt; 9，即912</p>
</blockquote>
<blockquote>
<p>进阶：假设这些数位是正向存放的，请再做一遍。<br>示例：<br>输入：(6 -&gt; 1 -&gt; 7) + (2 -&gt; 9 -&gt; 5)，即617 + 295<br>输出：9 -&gt; 1 -&gt; 2，即912</p>
</blockquote>
<h3 id="二-题解："><a href="#二-题解：" class="headerlink" title="二.题解："></a>二.题解：</h3><h4 id="1-第一种方法："><a href="#1-第一种方法：" class="headerlink" title="1.第一种方法："></a>1.第一种方法：</h4><h5 id="1-解题思路："><a href="#1-解题思路：" class="headerlink" title="(1)解题思路："></a>(1)解题思路：</h5><ul>
<li>新建一个链表newHead,新建一个遍历JinWei，用来标识相加是否进位</li>
<li>新建一个指针p指向newHead</li>
<li>利用while循环遍历，</li>
<li>当l1与l2都没有指向空时，sum=l1.val+l2.val+JinWei</li>
<li>然后给链表newHead新增元素，p.next=new ListNode(sum%10)</li>
<li>然后链表l1,l2,newHead指向下一位,JinWei=sum/10</li>
<li>然后当l2遍历结束，然而l1还未结束时，循环遍历，sum=l1.val+JinWei</li>
<li>然后链表newHead新增元素,p.next=new ListNode(sum%10)</li>
<li>然后链表l1,newHead指向下一位,JinWei=sum/10</li>
<li>同理，当l2未遍历结束时，与l1未遍历结束时一样，只是sum=l2.val+JinWei</li>
<li>最好判断JinWei是否为1，若JinWei==1，则还需要新建元素p.next=new ListNode(1)</li>
<li>最后返回新键的链表newHead.next即可</li>
</ul>
<h5 id="2-代码："><a href="#2-代码：" class="headerlink" title="(2)代码："></a>(2)代码：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l1==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> l2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(l2==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> l1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ListNode newHead = <span class="keyword">new</span> ListNode(-<span class="number">1</span>);</span><br><span class="line">        ListNode p =newHead;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> JinWei=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(l1!=<span class="keyword">null</span>&amp;&amp;l2!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> sum = l1.val+l2.val+JinWei;</span><br><span class="line">            p.next=<span class="keyword">new</span> ListNode(sum%<span class="number">10</span>);</span><br><span class="line">            JinWei=sum/<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">            p=p.next;</span><br><span class="line">            l1=l1.next;</span><br><span class="line">            l2=l2.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(l1!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> sum = l1.val+JinWei;</span><br><span class="line">            p.next=<span class="keyword">new</span> ListNode(sum%<span class="number">10</span>);</span><br><span class="line">            JinWei=sum/<span class="number">10</span>;</span><br><span class="line">            p=p.next;</span><br><span class="line">            l1=l1.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(l2!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> sum = l2.val+JinWei;</span><br><span class="line">            p.next=<span class="keyword">new</span> ListNode(sum%<span class="number">10</span>);</span><br><span class="line">            JinWei=sum/<span class="number">10</span>;</span><br><span class="line">            p=p.next;</span><br><span class="line">            l2=l2.next;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(JinWei==<span class="number">1</span>)&#123;</span><br><span class="line">            p.next=<span class="keyword">new</span> ListNode(JinWei);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> newHead.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-[LeetCode-面试02-04]分割链表"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/04/12/%5BLeetCode-%E9%9D%A2%E8%AF%9502-04%5D%E5%88%86%E5%89%B2%E9%93%BE%E8%A1%A8/"
    >[LeetCode-面试02.04]分割链表</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/04/12/%5BLeetCode-%E9%9D%A2%E8%AF%9502-04%5D%E5%88%86%E5%89%B2%E9%93%BE%E8%A1%A8/" class="article-date">
  <time datetime="2019-04-12T03:00:00.000Z" itemprop="datePublished">2019-04-12</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/LeetCode/">LeetCode</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="一-题目："><a href="#一-题目：" class="headerlink" title="一.题目："></a>一.题目：</h3><p>编写程序以 x 为基准分割链表，使得所有小于 x 的节点排在大于或等于 x 的节点之前。如果链表中包含 x，x 只需出现在小于 x 的元素之后(如下所示)。分割元素 x 只需处于“右半部分”即可，其不需要被置于左右两部分之间。</p>
<blockquote>
<p>示例:<br>输入: head = 3-&gt;5-&gt;8-&gt;5-&gt;10-&gt;2-&gt;1, x = 5<br>输出: 3-&gt;1-&gt;2-&gt;10-&gt;5-&gt;5-&gt;8</p>
</blockquote>
<h3 id="二-题解："><a href="#二-题解：" class="headerlink" title="二.题解："></a>二.题解：</h3><h4 id="1-第一种方法："><a href="#1-第一种方法：" class="headerlink" title="1.第一种方法："></a>1.第一种方法：</h4><h5 id="1-解题思路："><a href="#1-解题思路：" class="headerlink" title="(1)解题思路："></a>(1)解题思路：</h5><ul>
<li>先创建两个头结点分别用于连接小于部分和大于等于部分</li>
<li>遍历该链表，若当前结点小于x,将其插到小于的链表上否则插到大于链表上。</li>
<li>遍历完毕后，将大于等于部分链表的连到小于部分的后面即可</li>
</ul>
<h5 id="2-代码："><a href="#2-代码：" class="headerlink" title="(2)代码："></a>(2)代码：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">partition</span><span class="params">(ListNode head, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        ListNode preHead = <span class="keyword">new</span> ListNode(-<span class="number">1</span>);</span><br><span class="line">        ListNode nextHead = <span class="keyword">new</span> ListNode(-<span class="number">1</span>);</span><br><span class="line">        ListNode preCurrent = preHead;</span><br><span class="line">        ListNode nextCurrent = nextHead;</span><br><span class="line">        ListNode current = head;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(current != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(current.val &lt; x)&#123;</span><br><span class="line">                preCurrent.next = current;</span><br><span class="line">                preCurrent = preCurrent.next;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                nextCurrent.next = current;</span><br><span class="line">                nextCurrent = nextCurrent.next;</span><br><span class="line">            &#125;</span><br><span class="line">            current = current.next;</span><br><span class="line">        &#125;</span><br><span class="line">        preCurrent.next=nextHead.next;</span><br><span class="line">        nextCurrent.next=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> preHead.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/18/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><a class="page-number" href="/page/21/">21</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><a class="extend next" rel="next" href="/page/20/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2021
        <i class="ri-heart-fill heart_icon"></i> Movle
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="https://img-blog.csdnimg.cn/20200609161448519.jpg" alt="Movle"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>